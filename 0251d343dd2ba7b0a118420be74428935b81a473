{
  "comments": [
    {
      "key": {
        "uuid": "78556d08_98f61dcc",
        "filename": "private/system_server.te",
        "patchSetId": 11
      },
      "lineNbr": 916,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-18T15:51:31Z",
      "side": 1,
      "message": "Once mmap()ed into memory, are you closing the memfd file descriptors? This shouldn\u0027t be needed if the file descriptors are closed before the setcon() call is made. My understanding is that we only want to pass the JITed pages to system_server, not the file descriptor backing the JITed pages.",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 916,
        "endChar": 68
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f15da26_ac0ef501",
        "filename": "private/system_server.te",
        "patchSetId": 11
      },
      "lineNbr": 916,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-18T15:51:31Z",
      "side": 1,
      "message": "If this file descriptor really needs to carry over from system_server_startup to system_server, then you should also add the \"map\" permission, in addition to \"read write\". This is to support newer kernels where there\u0027s a new SELinux mmap permission.",
      "range": {
        "startLine": 916,
        "startChar": 55,
        "endLine": 916,
        "endChar": 65
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96a46f9b_ea9b4850",
        "filename": "private/system_server.te",
        "patchSetId": 11
      },
      "lineNbr": 916,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-19T12:16:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f15da26_ac0ef501",
      "range": {
        "startLine": 916,
        "startChar": 55,
        "endLine": 916,
        "endChar": 65
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4499f56b_3622d3c7",
        "filename": "private/system_server.te",
        "patchSetId": 11
      },
      "lineNbr": 916,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-19T12:16:49Z",
      "side": 1,
      "message": "The mem_fd is closed after initializing the region.\n\nI\u0027m not sure which fd that leads to this change, but without it boot fails. The JIT should fallback if there\u0027s a problem creating the fd. dancol@ pointed out that we can do dual mapping without memfd so I\u0027ll try that now and see if this is a factor.",
      "parentUuid": "78556d08_98f61dcc",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 916,
        "endChar": 68
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8317265_5c31bc3e",
        "filename": "private/system_server.te",
        "patchSetId": 11
      },
      "lineNbr": 916,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-19T12:47:43Z",
      "side": 1,
      "message": "I\u0027ll investigate this later. It still feels wrong to me that this is needed, but in the grand scheme of things, probably harmless.",
      "parentUuid": "4499f56b_3622d3c7",
      "range": {
        "startLine": 915,
        "startChar": 0,
        "endLine": 916,
        "endChar": 68
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3199871e_48aaa994",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 17,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-18T15:51:31Z",
      "side": 1,
      "message": "by convention, we don\u0027t use brackets when only one element exists in the list.",
      "range": {
        "startLine": 17,
        "startChar": 13,
        "endLine": 17,
        "endChar": 15
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87f8339c_2944ae58",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 17,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-19T12:16:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3199871e_48aaa994",
      "range": {
        "startLine": 17,
        "startChar": 13,
        "endLine": 17,
        "endChar": 15
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2606da32_749f2aec",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-19T12:16:49Z",
      "side": 1,
      "message": "Last reference to system_server here?",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8c32c75_e652201f",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-19T12:47:43Z",
      "side": 1,
      "message": "ya, at first glance, changing this to system_server_startup seems right. Good catch.",
      "parentUuid": "2606da32_749f2aec",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e6f263dc_f60fc213",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-23T13:44:11Z",
      "side": 1,
      "message": "Changed in PS15.\n\nUnfortunately ToT for AOSP appears to be broken for walleye (no touch input with and without these CLs) which hampers basic stuff like attaching adb. :/",
      "parentUuid": "e8c32c75_e652201f",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d9626657_0f242377",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 26,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-23T16:23:01Z",
      "side": 1,
      "message": "Backed out in 16 as it hits avc denied per the failed boot test:\n\nhttps://sponge.corp.google.com/target?id\u003d45fd77f3-e9ff-4ee4-848b-e7508f265323\u0026target\u003dDeviceBootTest\u0026searchFor\u003d\u0026show\u003dFAILED\u0026sortBy\u003dSTATUS\n\n10-23 14:59:37.959   767   767 I auditd  : type\u003d1400 audit(0.0:7): avc: denied { getpgid } for comm\u003d\"main\" scontext\u003du:r:zygote:s0 tcontext\u003du:r:system_server:s0 tclass\u003dprocess permissive\u003d0",
      "parentUuid": "e6f263dc_f60fc213",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 26,
        "endChar": 35
      },
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc06ea6d_f64686f7",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 136,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-10-18T15:51:31Z",
      "side": 1,
      "message": "This line should be deleted, due to the change at line 17.",
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "49038104_dfe31dbd",
        "filename": "private/zygote.te",
        "patchSetId": 11
      },
      "lineNbr": 136,
      "author": {
        "id": 1071150
      },
      "writtenOn": "2018-10-19T12:16:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cc06ea6d_f64686f7",
      "revId": "0251d343dd2ba7b0a118420be74428935b81a473",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}