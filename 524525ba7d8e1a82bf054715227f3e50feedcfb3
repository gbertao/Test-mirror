{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "83796be3_0ae5cd05",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-22T18:22:53Z",
      "side": 1,
      "message": "This is quite concerning. Whatever previously had access to this file via it\u0027s previous type (sysfs_vibrator, and sysfs_wlc below) will not longer have access. What breaks because of this?",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa06f040_7d63076a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1855559
      },
      "writtenOn": "2021-02-22T19:11:31Z",
      "side": 1,
      "message": "Just to make sure if I understand it correctly.. Are you saying by covering those limited I2C devices under a new label sysfs_i2cdevname will cause them not accessible using sysfs_vibrator and sysfs_wlc label?",
      "parentUuid": "83796be3_0ae5cd05",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "859992e1_696a6d3b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2021-02-22T19:13:06Z",
      "side": 1,
      "message": "Correct.  You\u0027re changing the label from the old one to the new one.  So anything that had access to them under the old labels but does not have access to the new label will lose access, which could be WAI or a bug.",
      "parentUuid": "fa06f040_7d63076a",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f584f685_4565a90c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1409782
      },
      "writtenOn": "2021-02-22T19:22:16Z",
      "side": 1,
      "message": "It was labeled sysfs_vibrator, but I don\u0027t know if anything was actually using it. Wouldn\u0027t it get that label if the whole device director was labeled sysfs_vibrator?\n\nWhat would be an alternative approach here? I don\u0027t know how practical it is to give system_suspend permission for all of sysfs_vibrator, sysfs_wlc, and any other labels when all it needs is access to the \"name\" sysfs nodes.",
      "parentUuid": "859992e1_696a6d3b",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06e397b1_959b60d6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2021-02-22T19:25:09Z",
      "side": 1,
      "message": "I think Jeff\u0027s point is that someone needs to think about whether this would break anything that used to have access to these nodes but no longer does.  Take a look through everything that can access the old labels: do any of them also need to access the new ones?",
      "parentUuid": "f584f685_4565a90c",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "447aa443_f821affc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1855559
      },
      "writtenOn": "2021-02-22T20:55:30Z",
      "side": 1,
      "message": "I found out sysfs_vibrator \u0026 sysfs_wlc used by following modules:\n\nsysfs_vibrator:\n---------------------\n- dumpstate\n- system_server\n- hal_vibrator\n- init\n- crash_dump\n- lbs_dbg\n- aee_aedv\n- factory\n\nsysfs_wlc:\n---------------\n- pixelstats_vendor\n- hal_health_default\n- hal_wlc\n- hal_dumpstate_impl\n- hal_sensors_default\n\nI will go ahead and check any of these accessing /sys/bus/i2c/devices/*/name, then we can go ahead because then my changes won\u0027t stomp on any other modules.\n\nPlease correct if you think otherwise.",
      "parentUuid": "06e397b1_959b60d6",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b96838d8_46cf6321",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-23T08:14:29Z",
      "side": 1,
      "message": "It appears as though you\u0027re only considering Pixel devices. You need to consider all devices to avoid breaking Treble backwards compat requirements.",
      "parentUuid": "447aa443_f821affc",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cf68293_826771b5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-23T08:16:05Z",
      "side": 1,
      "message": "This seems very device-specific. Should it be a HAL?",
      "parentUuid": "b96838d8_46cf6321",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7eb416f_f06866ad",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-02-23T08:24:57Z",
      "side": 1,
      "message": "Jeffrey is right. Instead of making old vendors to ignore this new label, it would be better/safer to have a mapping like\n\n(typeattributeset sysfs_vibrator_30_0 (sysfs_vibrator sysfs_i2cdevname))",
      "parentUuid": "b96838d8_46cf6321",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4823101_249566b0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-23T08:36:53Z",
      "side": 1,
      "message": "But isn\u0027t the problem worse than that? We have no idea what types partners may have mapped these to. And this almost certainly includes types that are specific to their vendor policy, and that we have no access to. sysfs_wlc is a perfect example. This is a pixel-specific type that core policy has no knowledge of.\n\nhttps://cs.android.com/android/platform/superproject/+/master:device/google/coral-sepolicy/vendor/google/file.te?q\u003dsysfs_wlc\u0026start\u003d11",
      "parentUuid": "c7eb416f_f06866ad",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14aa1ad2_1bd2c01a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 13,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-02-23T09:02:45Z",
      "side": 1,
      "message": "Ah, yes. You are right. I wonder how the sysfs nodes got sysfs_vibrator on bramble. https://source.corp.google.com/search?q\u003dgenfscon.*sysfs_vibrator%20f:bramble\u0026sq\u003dpackage:%5Eandroid$ doesn\u0027t show anything.",
      "parentUuid": "a4823101_249566b0",
      "range": {
        "startLine": 13,
        "startChar": 154,
        "endLine": 13,
        "endChar": 168
      },
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e8cff94_d45e7c07",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-22T18:20:55Z",
      "side": 1,
      "message": "Based on my comments for your cts change, you may need to grant shell getattr access.\n\ne.g. in system/sepolicy/private/shell.te\nallow shell sysfs_i2cdevname:file getattr;",
      "revId": "524525ba7d8e1a82bf054715227f3e50feedcfb3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}