{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fa8d2851_d9db7936",
        "filename": "private/file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 764,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:37:50Z",
      "side": 1,
      "message": "Can\u0027t these 4 lines be expressed as a single line?\n/metadata/gsi/dsu(/.*)?  u:object_r:gsi_public_metadata_file:s0\n\nAm I missing something here?",
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b61bbd4f_af14083a",
        "filename": "private/file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 764,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T08:55:08Z",
      "side": 1,
      "message": "Not all files in `/metadata/gsi/dsu/` are public, there are some files like /metadata/gsi/dsu/dsu/lp_metadata that we really don\u0027t want others to read.",
      "parentUuid": "fa8d2851_d9db7936",
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "47cee771_fb9a65fc",
        "filename": "private/file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 764,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:57:35Z",
      "side": 1,
      "message": "ack, thanks for the explanation.",
      "parentUuid": "b61bbd4f_af14083a",
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28281163_891d943e",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:37:50Z",
      "side": 1,
      "message": "delete?",
      "range": {
        "startLine": 138,
        "startChar": 25,
        "endLine": 138,
        "endChar": 34
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e602d8cc_ac886dd6",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 138,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T08:56:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "28281163_891d943e",
      "range": {
        "startLine": 138,
        "startChar": 25,
        "endLine": 138,
        "endChar": 34
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54ba719d_88ff4683",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 140,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:37:50Z",
      "side": 1,
      "message": "This seems a little bit dangerous because it allows gsid to relabel any of these types to any other of these types. Is that really necessary? Or should this be limited to just the relabels that are needed?",
      "range": {
        "startLine": 140,
        "startChar": 11,
        "endLine": 140,
        "endChar": 33
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f935290_a9bfa852",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 140,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T08:56:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "54ba719d_88ff4683",
      "range": {
        "startLine": 140,
        "startChar": 11,
        "endLine": 140,
        "endChar": 33
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "127c5ea9_583af0f1",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:37:50Z",
      "side": 1,
      "message": "By who? Do we really want to allow (e.g.) 3p apps to call access(, F_OK) here? That seems unnecessarily permissive and allows apps to see device state that they should not be allowed to see.",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c289a5ae_89cf1d58",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T08:55:08Z",
      "side": 1,
      "message": "QQ Can I limit this to just pre-installed process (exclude 3p app)?",
      "parentUuid": "127c5ea9_583af0f1",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e2bbcff_fe739989",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T08:57:35Z",
      "side": 1,
      "message": "So, to be clear, you\u0027re not currently granting access to 3p apps, my concern is that you\u0027re loosening the neverallow rule such that it could be added by us or partners and I don\u0027t understand why.",
      "parentUuid": "c289a5ae_89cf1d58",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db9c02f3_187cd13d",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T09:07:02Z",
      "side": 1,
      "message": "I\u0027m loosening this because fs_mgr_fstab needs to read gsi_public_metadata_file to infer the exact fstab, but that code (fs_mgr_fstab) could be called from vendor processes. Thus I don\u0027t know who to exclude from the neverallow?\n\nI\u0027m also not sure if 3p apps would ever need to know the device fstab? I guess not. So I think it\u0027s reasonable to block 3p apps from reading this. Can I do something like \"neverallow {domain -preinstalled_process}\" to block 3p apps?",
      "parentUuid": "6e2bbcff_fe739989",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e646cca_1eb2ed17",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-22T09:21:39Z",
      "side": 1,
      "message": "Would adding \"neverallow untrusted_app gsi_metadata_file_type:dir *;\" be sufficient?",
      "parentUuid": "db9c02f3_187cd13d",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d044dcf_5a54f411",
        "filename": "private/gsid.te",
        "patchSetId": 2
      },
      "lineNbr": 161,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-22T09:56:32Z",
      "side": 1,
      "message": "You\u0027re only exempting \"search\" which basically only allows directory traversal and calling access(F_OK).\n\nHow is that sufficient for fs_mgr_fstab?",
      "parentUuid": "2e646cca_1eb2ed17",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 161,
        "endChar": 58
      },
      "revId": "587ca2a8720939fadf7cedb393d78f6413c9d758",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}