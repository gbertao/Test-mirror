{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e7d1c784_65661c4b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-01-14T22:04:41Z",
      "side": 1,
      "message": "does this also need hal_attribute_service specified for hal_drm? Please confirm that \u0027dumpsys\u0027 (not lshal) shows the existance of the AIDL HAL",
      "revId": "8b39c2bd1a7767bded564fb6d28b2288006747f4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57c0e3f7_a8c9ac3a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1005970
      },
      "writtenOn": "2022-01-19T18:25:21Z",
      "side": 1,
      "message": "Hi Steven,\n\nHere is the dumpsys output:\n adb shell dumpsys | grep widevine\n  android.hardware.drm.ICryptoFactory/widevine\n  android.hardware.drm.IDrmFactory/widevine\nError with service \u0027android.hardware.contexthub.IContextHub/default\u0027 while dumping: FAILED_TRANSACTION\nError with service \u0027android.hardware.drm.ICryptoFactory/clearkey\u0027 while dumping: FAILED_TRANSACTION\nDUMP OF SERVICE android.hardware.drm.ICryptoFactory/widevine:\nError with service \u0027--------- 0.001s was the duration of dumpsys android.hardware.drm.ICryptoFactory/widevine, ending at: 2022-01-19 09:11:02\nandroid.hardware.drm.IDrmFactory/clearkey\u0027 while dumping: FAILED_TRANSACTION\nError with service \u0027android.hardware.identity.IIdentityCredentialStore/default\u0027 while DUMP OF SERVICE android.hardware.drm.IDrmFactory/widevine:\ndumping: Usage: adb shell lshal debug android.hardware.drm@1.3::IDrmFactory/widevine [m|p]\nFAILED_TRANSACTION--------- 0.000s was the duration of dumpsys android.hardware.drm.IDrmFactory/widevine, ending at: 2022-01-19 09:11:02\n\nError with service \u0027android.hardware.power.IPower/default\u0027 while dumping: FAILED_TRANSACTION\nError with service \u0027android.hardware.rebootescrow.IRebootEscrow/default\u0027 while dumping: FAILED_TRANSACTION\nError with service \u0027android.os.UpdateEngineService\u0027 while dumping: FAILED_TRANSACTION\nError with service \u0027android.os.UpdateEngineStableService\u0027 while dumping: FAILED_TRANSACTION\nCan\u0027t find service: android.service.gatekeeper.IGateKeeperService\nError with service \u0027android.system.suspend.ISystemSuspend/default\u0027 while dumping: FAILED_TRANSACTION\nCan\u0027t find service: dnsresolver\nCan\u0027t find service: incident\nCan\u0027t find service: installd\nError with service \u0027manager\u0027 while dumping: FAILED_TRANSACTION\nCan\u0027t find service: netd\n      com.google.widevine.software.drm\n      com.google.widevine.software.drm\nCan\u0027t find service: suspend_control\nCan\u0027t find service: suspend_control_internal\nCan\u0027t find service: vold\nError with service \u0027wifinl80211\u0027 while dumping: FAILED_TRANSACTION\n\nThe Widevine Aidl service is listed, but it has FAILED_TRANSACTION error. I am trying to figure out what causes the error. Does it have to do with the fact that the frameworks side has not switchted to AIDL?\n\nIn logcat, I am seeing a binder error:\n01-19 09:10:12.571     0     0 I         : c0      1 init: processing action (init.svc.mediadrm\u003drunning) from (/vendor/etc/init/android.hardware.drm-service.widevine.rc:1)\n01-19 09:10:12.576     0     0 I         : c0      1 init: processing action (init.svc.mediadrm\u003drunning) from (/vendor/etc/init/android.hardware.drm@1.4-service.widevine.rc:1)\n01-19 09:10:12.635     0     0 I         : c6   1274 binder: 1274:1274 ioctl 40046210 7fd5006048 returned -22\n\nI am only finding the code in vendor/google_experimental/users/danielaustin/kasan_bullhead/private/msm-lge/drivers/staging/android/binder.c (line 2801) for the log that prints binder: proc-\u003epid:current-\u003epid ioctl x:x returned: err.\n\nDoes the binder error in logcat refer to android.hardware.drm@1.4-service.widevine.rc, not android.hardware.drm-service.widevine.rc?",
      "parentUuid": "e7d1c784_65661c4b",
      "revId": "8b39c2bd1a7767bded564fb6d28b2288006747f4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}