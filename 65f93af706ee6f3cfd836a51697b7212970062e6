{
  "comments": [
    {
      "key": {
        "uuid": "5c899276_b60490f2",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2016-10-14T00:14:39Z",
      "side": 1,
      "message": "This is a verified boot bypass in a highly privileged domain. We should avoid this. \n\njorgelo, have you talked to Robert about this yet?",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c899276_84b59637",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-10-14T03:12:17Z",
      "side": 1,
      "message": "Webviews need to JIT but shouldn\u0027t that be done after the transition to isolated_app?",
      "parentUuid": "5c899276_b60490f2",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc5582ad_272954a1",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1076138
      },
      "writtenOn": "2016-10-14T16:01:47Z",
      "side": 1,
      "message": "Like I mentioned on email, I think this is OK, modulus Jeff\u0027s comment.\n\nThis WebView refactor is not adding new attack surface -- it\u0027s splitting off existing code to a new process. Therefore, we\u0027re not allowing new code to take advantage of the neverallow exception: it\u0027s the same amount of code, now split into two processes.",
      "parentUuid": "5c899276_84b59637",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c899276_2a3113a1",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-10-14T16:04:34Z",
      "side": 1,
      "message": "But why not remove it here if it\u0027s not necessary? Is this code shared with zygote?",
      "parentUuid": "dc5582ad_272954a1",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cdd769f_8904f924",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2016-10-14T16:09:17Z",
      "side": 1,
      "message": "It is necessary. The entire point of the webview zygote is to have preloaded as much of the webview implementation as is useful before forking, to save memory (just as the main zygote does with the framework).",
      "parentUuid": "5c899276_2a3113a1",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c91dace_beef59aa",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-10-14T16:17:31Z",
      "side": 1,
      "message": "I\u0027m trying to understand why. zygote preloading libraries that all apps need makes sense, but (my understanding is that) dalvik cache contains code compiled for individual apps. Is my understanding wrong, or do we pre-load that too?",
      "parentUuid": "7cdd769f_8904f924",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cdd769f_c92711b9",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2016-10-14T16:20:25Z",
      "side": 1,
      "message": "The WebView zygote will preload the code compiled from the WebView APK. All its children are WebView renderer processes who will run a service defined in that APK, so preloading that APK\u0027s dynamically generated code is beneficial as it\u0027s guaranteed to be used by all children.",
      "parentUuid": "1c91dace_beef59aa",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc6f42aa_b474e026",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-10-14T16:22:44Z",
      "side": 1,
      "message": "Ah, that makes sense. I was forgetting that webview ships as an APK (since L I believe). Thanks for the explanation!",
      "parentUuid": "7cdd769f_c92711b9",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bca52e1d_ebc131fc",
        "filename": "public/domain.te",
        "patchSetId": 5
      },
      "lineNbr": 308,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2016-10-14T16:27:30Z",
      "side": 1,
      "message": "Right. Back in K when it wasn\u0027t an APK yet, we just preloaded the WebView code into the main zygote process because there weren\u0027t the security concerns associated with it being updated via the play store.",
      "parentUuid": "dc6f42aa_b474e026",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c899276_e4f582e3",
        "filename": "public/webview_zygote.te",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-10-14T03:14:14Z",
      "side": 1,
      "message": "e.g. I was able to do every socket type but: packet_socket (for setting properties) unix_{stream,dgram}_socket for logd, and netlink_selinux_socket for selinux state.\n\nneverallow webview_zygote domain:{ socket tcp_socket udp_socket rawip_socket netlink_socket key_socket appletalk_socket netlink_route_socket netlink_firewall_socket netlink_tcpdiag_socket netlink_nflog_socket netlink_xfrm_socket netlink_audit_socket netlink_ip6fw_socket netlink_dnrt_socket netlink_kobject_uevent_socket tun_socket netlink_iscsi_socket netlink_fib_lookup_socket netlink_connector_socket netlink_netfilter_socket netlink_generic_socket netlink_scsitransport_socket netlink_rdma_socket netlink_crypto_socket } *;",
      "revId": "65f93af706ee6f3cfd836a51697b7212970062e6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}