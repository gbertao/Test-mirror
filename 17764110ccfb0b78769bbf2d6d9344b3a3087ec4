{
  "comments": [
    {
      "key": {
        "uuid": "af06dd29_e2b8e7f1",
        "filename": "private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-03-18T20:04:00Z",
      "side": 1,
      "message": "for robustness, you can use the macro \"r_dir_perms\" instead.\n\nSee the definition of r_dir_perms in system/sepolicy/public/global_macros",
      "range": {
        "startLine": 46,
        "startChar": 35,
        "endLine": 46,
        "endChar": 58
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13d68044_9c3bb812",
        "filename": "private/postinstall_dexopt.te",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-03-13T19:19:24Z",
      "side": 1,
      "message": "I don\u0027t know much about the update_engine. Could you tell me why update_engine changes the label?\n\nMaybe we could label\n\n/system/apex/com.android.runtime.{release|debug}/bin/dex2oat\n\nas dex2oat_exec?",
      "range": {
        "startLine": 13,
        "startChar": 47,
        "endLine": 14,
        "endChar": 54
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "39d0d80b_a622248f",
        "filename": "private/postinstall_dexopt.te",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2019-03-13T20:12:10Z",
      "side": 1,
      "message": "update_engine tags all files under `/postinstall` with type `postinstall_file` when it mounts that partition; see\n* https://android.googlesource.com/platform/system/update_engine/+/refs/heads/master/payload_consumer/postinstall_runner_action.cc#163\n* https://android.googlesource.com/platform/system/update_engine/+/refs/heads/master/common/platform_constants_android.cc#34\n\nI\u0027m not sure why, but I guess that\u0027s for security reasons and/or future-proof-ness? Andreas would know better.\n\nRelabeling `/system/apex/com.android.runtime.(release|debug)/bin/dex2oat(d)?` sounds like a good idea.\n\nNote that the \n\n  domain_auto_trans(postinstall_dexopt, postinstall_file, dex2oat)\n\npolicy pre-existed my initial changes to otapreopt/installd policies (https://android-review.googlesource.com/c/platform/system/sepolicy/+/878313/3/private/postinstall_dexopt.te).",
      "parentUuid": "13d68044_9c3bb812",
      "range": {
        "startLine": 13,
        "startChar": 47,
        "endLine": 14,
        "endChar": 54
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e02a9409_877585ac",
        "filename": "private/postinstall_dexopt.te",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2019-03-13T20:15:39Z",
      "side": 1,
      "message": "update_engine doesn\u0027t really change the label. The new system partition doesn\u0027t have to have the same label set (it could be a release update, for example), which would be unexpressible in the running system. The designers chose to resolve that issue by having a unified, \"simple\" view that\u0027s always possible, and then force folks to work with that.",
      "parentUuid": "39d0d80b_a622248f",
      "range": {
        "startLine": 13,
        "startChar": 47,
        "endLine": 14,
        "endChar": 54
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f5a71ec4_b847f432",
        "filename": "private/postinstall_dexopt.te",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2019-03-13T21:34:50Z",
      "side": 1,
      "message": "makes sense. thank you. then relabeling it to dex2oat_exec seems to be unnecessary.",
      "parentUuid": "e02a9409_877585ac",
      "range": {
        "startLine": 13,
        "startChar": 47,
        "endLine": 14,
        "endChar": 54
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db4440b8_8542f879",
        "filename": "private/postinstall_dexopt.te",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1052644
      },
      "writtenOn": "2019-03-14T13:21:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f5a71ec4_b847f432",
      "range": {
        "startLine": 13,
        "startChar": 47,
        "endLine": 14,
        "endChar": 54
      },
      "revId": "17764110ccfb0b78769bbf2d6d9344b3a3087ec4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}