{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "69481352_57a3a18b",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-08-31T09:03:21Z",
      "side": 1,
      "message": "If the policy is the same for both properties, could we just give them the same name?\nhypervisor_testing_prop?\n\nAnd can they, or at least the allow rules, be marked as userdebug_or_eng ?",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed3199dc_0da0139b",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2023-08-31T13:28:44Z",
      "side": 1,
      "message": "\u003e If the policy is the same for both properties, could we just give them the same name? hypervisor_testing_prop?\n\nI proposed that name initially, but inseob recommended to have finer grained name :D. @inseob@google.com, what do you think about the naming?\n\n\u003e And can they, or at least the allow rules, be marked as userdebug_or_eng ?\n\nSo that\u0027s tricky discussion. Here\u0027s bit details about the background:\n\nCustom debug policy tests use sysprop which can only be written with `adb root`. Initially, I proposed not to build such testing features at all in user build, but you and other people said that \u0027user and userdebug are never supposed to differ in behavior\u0027 with the link go/android-userdebug-policy in Rust chat room.\n\nI agreed the guideline because debug policy is allowed in user build if the device is unlocked. Note that CTS enforces no debug policy in production device, but `virtualizationmanager` itself doesn\u0027t enforce it.\n\nSo, for this CL, should we use `userdebug_or_eng` to prevent manufacturers to configure `user` build with the testing sysprops are set? I think that `userdebug_or_eng` is unnecessary, given the nature of the debug policy and go/android-userdebug-policy. I didn\u0027t explicitly allow writing those props, so only `root` and `init` process can override the value, and reading those value seems harmless to me.\n\nWhat do you think?",
      "parentUuid": "69481352_57a3a18b",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35e778a0_93416609",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-08-31T13:40:59Z",
      "side": 1,
      "message": "On the labeling, I defer to Inseob; whatever he thinks I\u0027m fine with.\n\nOn user/userdebug/root: the status quo is that you can\u0027t set the properties on user build device, because you\u0027d need to set it via `adb root`, which isn\u0027t available. I think that\u0027s right?\n\nI was just thinking that having less policy on user builds is good. But you make valid points. \n\nI quite like not allowing read on user because it makes it much harder to accidentally/maliciously enable. We do have a fair amount of userdebug_or_eng, despite the Android policy, but hopefully it\u0027s mostly things that will never or should never happen on a user build anyway.",
      "parentUuid": "ed3199dc_0da0139b",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11d486fc_565067ad",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2023-08-31T14:04:14Z",
      "side": 1,
      "message": "\u003e On user/userdebug/root: the status quo is that you can\u0027t set the properties on user build device, because you\u0027d need to set it via adb root, which isn\u0027t available. I think that\u0027s right?\n\nYou\u0027re right. This CL doesn\u0027t change the behavior but only give label.\n\n\u003e I was just thinking that having less policy on user builds is good. But you make valid points.\n\u003e I quite like not allowing read on user because it makes it much harder to accidentally/maliciously enable. We do have a fair amount of userdebug_or_eng, despite the Android policy, but hopefully it\u0027s mostly things that will never or should never happen on a user build anyway.\n\nI\u0027m sorry but I\u0027m bit confused about your wording. Do you prefer to have `userdebug_or_eng` in this CL? I think that no `userdebug_or_eng` is OK, but I just want to get your opinion as well.",
      "parentUuid": "35e778a0_93416609",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3eab950a_6be7997f",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-08-31T14:17:24Z",
      "side": 1,
      "message": "I\u0027m mildly in favor of `userdebug_or_eng`, but I don\u0027t think it\u0027s particularly important. Either is ok.",
      "parentUuid": "11d486fc_565067ad",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac115598_5508d16d",
        "filename": "private/virtualizationmanager.te",
        "patchSetId": 7
      },
      "lineNbr": 72,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2023-09-01T02:44:36Z",
      "side": 1,
      "message": "Talked with inseob, and decided to add `userdebug_or_eng`.",
      "parentUuid": "3eab950a_6be7997f",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 70
      },
      "revId": "8c0d90cdad36d4de9a09ec11b51a6f0efe2dd57d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}