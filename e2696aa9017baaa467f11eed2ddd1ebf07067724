{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ddc9ddd4_28a535a7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2023-03-24T09:29:46Z",
      "side": 1,
      "message": "Does this still support this? (I guess so, because this is a neverallow rule change, but wanted to check it anyway) \nhttps://cs.android.com/android/platform/superproject/+/master:packages/modules/Virtualization/microdroid/README.md;drc\u003d0674c99a1790febc842f6058e5f4919115ac9ad4;l\u003d217",
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdad7719_01782394",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1432579
      },
      "writtenOn": "2023-03-24T14:53:22Z",
      "side": 1,
      "message": "It seems not to work even without my change. Filed b/275058548 to track.",
      "parentUuid": "ddc9ddd4_28a535a7",
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0136258d_420e7cee",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1432579
      },
      "writtenOn": "2023-03-24T17:02:19Z",
      "side": 1,
      "message": "Since neverallow is a compile-time rule, it\u0027s unlikely that it will be the reason of payload debugging not working. Do you think we can proceed with this change?",
      "parentUuid": "cdad7719_01782394",
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b32dc09_612f929f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-03-24T17:12:16Z",
      "side": 1,
      "message": "It may indicate there\u0027s an allow missing, which might conflict with the neverallow here. But that seems slightly hypothetical. I\u0027m happy to tighten now \u0026 relax if needed.",
      "parentUuid": "0136258d_420e7cee",
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d16b6ea_215a894b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1432579
      },
      "writtenOn": "2023-03-27T13:55:02Z",
      "side": 1,
      "message": "Thanks! Marking as resolved",
      "parentUuid": "6b32dc09_612f929f",
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cfd42fc_c3cbdb51",
        "filename": "microdroid/system/private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 555,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-03-24T09:22:24Z",
      "side": 1,
      "message": "I wonder if this is slightly too strong; it seems reasonable to allow a domain to ptrace itself.\n\nI\u0027m not sure if\nneverallow { domain -crash_dump } { domain -self }:process ptrace;\nactually works though.\n\nAnd in practice we don\u0027t currently grant self ptrace anywhere in Microdroid, although we do in system policy.",
      "range": {
        "startLine": 555,
        "startChar": 0,
        "endLine": 555,
        "endChar": 56
      },
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "54882121_fd77f41e",
        "filename": "microdroid/system/private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 555,
      "author": {
        "id": 1432579
      },
      "writtenOn": "2023-03-24T17:02:19Z",
      "side": 1,
      "message": "This fails with the following error:\n\n```\nsystem/sepolicy/microdroid/system/private/domain.te:555:ERROR \u0027-self is not supported\u0027 at token \u0027;\u0027 on line 6897\n```\n\nDiscussed offline with Alan, we will proceed with the current approach, and change it in the future if we decide that we want to grant processes ability to ptrace themselves.",
      "parentUuid": "4cfd42fc_c3cbdb51",
      "range": {
        "startLine": 555,
        "startChar": 0,
        "endLine": 555,
        "endChar": 56
      },
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a6dcde3_906f903c",
        "filename": "microdroid/system/private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 555,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-03-24T17:12:16Z",
      "side": 1,
      "message": "I just noticed that we\u0027re missing \nneverallow crash_dump self:process ptrace;\n\nfrom system/sepolicy/microdroid/system/private/crash_dump.te; it\u0027s there in system policy (cs/android-internal/system/sepolicy/private/crash_dump.te?rcl\u003d5e94b1698c65945f877b19829c54606add0fc80c\u0026l\u003d59).\n\nWould you mind adding it while you\u0027re here?",
      "range": {
        "startLine": 554,
        "startChar": 0,
        "endLine": 555,
        "endChar": 56
      },
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddbca746_18810867",
        "filename": "microdroid/system/private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 555,
      "author": {
        "id": 1432579
      },
      "writtenOn": "2023-03-27T13:55:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7a6dcde3_906f903c",
      "range": {
        "startLine": 554,
        "startChar": 0,
        "endLine": 555,
        "endChar": 56
      },
      "revId": "e2696aa9017baaa467f11eed2ddd1ebf07067724",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}