{
  "comments": [
    {
      "key": {
        "uuid": "4a682fdf_989a7b3d",
        "filename": "private/incident.te",
        "patchSetId": 1
      },
      "lineNbr": 1,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2017-02-03T22:03:41Z",
      "side": 1,
      "message": "This is misplaced. incident is not started from init.",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10099447_04920b15",
        "filename": "public/incident.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2017-02-03T18:17:43Z",
      "side": 1,
      "message": "Please check whether incident command can successfully call into incidentd.\n\nThis comment doesn\u0027t appear to match the grants below. The allow rule below only grants incident the power to obtain incident_service\u0027s Binder token from service manager.  It does not grant Binder IPC using that token. Presumably, the token is backed by incidentd domain. Thus, what\u0027s likely missing is binder_call(incident, incidentd).",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72268b85_10d84093",
        "filename": "public/incident.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2017-02-03T21:36:30Z",
      "side": 1,
      "message": "Hmm. It seems to be already working. In fact, if I remove this line or change it to neverallow, I don\u0027t get any build failures and everything still works.\n\nAny tips on where else to look for that?  If I leave this line and change the line in incidentd.te\n\nneverallow { domain -system_server -system_app -incident -incidentd } incident_service:service_manager find;\n\nto not include -incident, then I do trigger the neverallow check.",
      "parentUuid": "10099447_04920b15",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "021fde2b_d2fe6ecf",
        "filename": "public/incident.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2017-02-03T21:45:52Z",
      "side": 1,
      "message": "I meant that according to the current policy incident is not permitted to IPC over Binder into incidentd. Which is contrary to what the comment says. If everything works just fine, even without this, perhaps this means incident isn\u0027t performing any IPCs into incidentd?\n\nTry adding -- policy still compiles:\n\nneverallow incident incidentd:binder { call transfer };\n# Allow the serverdomain to transfer references to the client on the reply.\nneverallow incidentd incident:binder transfer;\n# Receive and use open files from the server.\nneverallow incident incidentd:fd use;",
      "parentUuid": "72268b85_10d84093",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6bc4650f_77d45a17",
        "filename": "public/incident.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2017-02-06T21:30:08Z",
      "side": 1,
      "message": "Just to follow up on the CL here with what we learned over chat -- this rule was never needed because I had been running in the su domain.  That\u0027s fixed now, and the additional rules are in fact needed and included in the new patch set.",
      "parentUuid": "021fde2b_d2fe6ecf",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4c75d9a4_ca0082c5",
        "filename": "public/incidentd.te",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2017-02-03T18:17:43Z",
      "side": 1,
      "message": "ephemeral_app has finally been moved into appdomain. Thus, this should be just appdomain.",
      "range": {
        "startLine": 55,
        "startChar": 23,
        "endLine": 55,
        "endChar": 50
      },
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f7a82d0_ffb0370c",
        "filename": "public/incidentd.te",
        "patchSetId": 1
      },
      "lineNbr": 55,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2017-02-03T21:36:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4c75d9a4_ca0082c5",
      "range": {
        "startLine": 55,
        "startChar": 23,
        "endLine": 55,
        "endChar": 50
      },
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e21f7636_5be75677",
        "filename": "public/incidentd.te",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1018773
      },
      "writtenOn": "2017-02-03T18:17:43Z",
      "side": 1,
      "message": "Please replace this line and the corresponding neverallow with the recently added macro:\n\nadd_service(incidentd, incident_service)",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bfa17a91_c9d1dc7b",
        "filename": "public/incidentd.te",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1000701
      },
      "writtenOn": "2017-02-03T21:36:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e21f7636_5be75677",
      "revId": "1a9b52e6e32c0b4d100b0e8f3454c3c15fb54744",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}