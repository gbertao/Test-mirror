{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7834be9d_3f61746f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-20T10:10:24Z",
      "side": 1,
      "message": "I\u0027m testing after CPing aosp/1765445 and aosp/1771725, with Victor\u0027s memory hack. Currently I see a bunch of SELinux denials (in permissive mode) while testing.",
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7ae02db_5d54c2cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-20T10:20:48Z",
      "side": 1,
      "message": "Yes, I see that too. I\u0027m happy to add a bunch of rules for at least the key service, once this is submitted to make sure the domains exist.",
      "parentUuid": "7834be9d_3f61746f",
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "344d826c_12860842",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2021-07-20T18:14:03Z",
      "side": 1,
      "message": "We also need /bin/authfs, right?  I\u0027d keep it in a separate domain similar to dex2oat, since they both handle untrusted input.",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 6
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6063cb5_086c64c4",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-23T04:52:52Z",
      "side": 1,
      "message": "The apex doesn\u0027t seem to include authfs?\n\nhttp://cs/android/packages/modules/Virtualization/compos/apex/Android.bp?l\u003d29\u0026rcl\u003dacba9b814ec487526b5b0ae0bc5887bde84cef0c",
      "parentUuid": "344d826c_12860842",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 6
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34a3cd4c_e6be14ed",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-20T10:20:48Z",
      "side": 1,
      "message": "This one shouldn\u0027t be here - it\u0027s always run in the host.",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 19
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47e6ab65_1e3ab4d8",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-21T02:19:21Z",
      "side": 1,
      "message": "The host also uses the same APEX, right?",
      "parentUuid": "34a3cd4c_e6be14ed",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 19
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9651c154_d5bb02dd",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-21T07:52:39Z",
      "side": 1,
      "message": "That\u0027s right. TBH this is a test tool, always run via root shell, which we\u0027ll probably get rid of at some point, but it\u0027s useful for now.",
      "parentUuid": "47e6ab65_1e3ab4d8",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 19
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "222a7cbb_eb8cbb0c",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-23T04:52:52Z",
      "side": 1,
      "message": "Okay. Then this entry should be here, because apex/com.android.compos-file_contexts will be used from both host and vm.",
      "parentUuid": "9651c154_d5bb02dd",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 19
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b0d4372_14f22f80",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-20T10:20:48Z",
      "side": 1,
      "message": "I think all three of these should use the same domain, because sooner or later they will need to be unified into a single service. (Would be interested to hear Victor\u0027s take though.)\n\ncompos_exec, compos?",
      "range": {
        "startLine": 4,
        "startChar": 25,
        "endLine": 4,
        "endChar": 51
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39b1458d_636bc9a0",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2021-07-20T18:14:03Z",
      "side": 1,
      "message": "Yes, I also think it\u0027s reasonable to merge into one domain.  For compsvc, it may eventually become a library, but that won\u0027t change what this service/domain is allowed to do.",
      "parentUuid": "4b0d4372_14f22f80",
      "range": {
        "startLine": 4,
        "startChar": 25,
        "endLine": 4,
        "endChar": 51
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66b92ef2_86fc1537",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-21T02:19:21Z",
      "side": 1,
      "message": "What are \"these\"? compos_key_main, compsvc, and compsvc_worker, except for compos_key_cmd?",
      "parentUuid": "39b1458d_636bc9a0",
      "range": {
        "startLine": 4,
        "startChar": 25,
        "endLine": 4,
        "endChar": 51
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef08045c_df037ef3",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-21T07:52:39Z",
      "side": 1,
      "message": "Yes, exactly.",
      "parentUuid": "66b92ef2_86fc1537",
      "range": {
        "startLine": 4,
        "startChar": 25,
        "endLine": 4,
        "endChar": 51
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99756421_08ad6775",
        "filename": "apex/com.android.compos-file_contexts",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-07-23T06:02:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef08045c_df037ef3",
      "range": {
        "startLine": 4,
        "startChar": 25,
        "endLine": 4,
        "endChar": 51
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4031fa89_11d163e7",
        "filename": "microdroid/system/private/compsvc.te",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-21T11:07:36Z",
      "side": 1,
      "message": "You\u0027ll need dex2oat_exec in a file_contexts somewhere too.",
      "range": {
        "startLine": 5,
        "startChar": 27,
        "endLine": 5,
        "endChar": 39
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b51b1256_face1c0c",
        "filename": "microdroid/system/private/compsvc.te",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-21T11:12:00Z",
      "side": 1,
      "message": "Actually that\u0027s probably not true. Sorry, ignore me, trying to debug something vaguely related.",
      "parentUuid": "4031fa89_11d163e7",
      "range": {
        "startLine": 5,
        "startChar": 27,
        "endLine": 5,
        "endChar": 39
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a2ea87e_02b70815",
        "filename": "microdroid/system/private/microdroid_manager.te",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-07-20T10:20:48Z",
      "side": 1,
      "message": "Nit: there should probably be a macro for this, eventually. Similar to init_daemon_domain, but for VM payloads.\n\nShould there also be a neverallow to make sure microdroid_manager never runs anything in its own domain, similar to http://cs/android/system/sepolicy/public/init.te?l\u003d633 ?",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 17
      },
      "revId": "70e5e898e7ff70d018629d404adc5b048dab5bb7",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}