{
  "comments": [
    {
      "key": {
        "uuid": "ac1ae224_15a4eacf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-07-16T13:06:35Z",
      "side": 1,
      "message": "PTAL. This is a small first step, but useful in flushing out existing apps and blocking new ones with mlstrustedsubject and using [priv_]app_data_file, which is a bad combination.\n\nSee also go/cross-user-app-visibility-proposal.\n\n\u003e Patch Set 3:\n\u003e \n\u003e I\u0027m pretty concerned about this change. Previously the MLS categories protected third party apps from system apps, isolating their private app data and process information using selinux. With this change, we\u0027re back to the old state where only UID separated these apps. We know that UID can be mistakenly/intentionally/maliciously overriden and we moved away from that state because it\u0027s unsafe.\n\nWe discussed offline. This isn\u0027t removing protection from private app data, just changing how it works. Anything with appdomain \u0026 mlstrusted subject automatically loses access, enforced with neverallow.\n",
      "revId": "cbd896d802c571c6c73cb341b06b1c5c3cf93974",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "43c95197_bf54b27d",
        "filename": "private/mlstrustedsubject.te",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-07-22T10:49:44Z",
      "side": 1,
      "message": "Why is search allowed?",
      "range": {
        "startLine": 19,
        "startChar": 58,
        "endLine": 19,
        "endChar": 64
      },
      "revId": "cbd896d802c571c6c73cb341b06b1c5c3cf93974",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "98f2b38e_dba5b192",
        "filename": "private/mlstrustedsubject.te",
        "patchSetId": 4
      },
      "lineNbr": 19,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-07-22T13:45:09Z",
      "side": 1,
      "message": "To avoid breaking the 4 existing domains that already have mlstrustedsubject + search. (I got to this list of permissions by trying various combinations to see how much breakage they caused.)\n\nActually restricting read and gettattr is also possible if I add zygote to the exempt list (it has getattr).\n\nI added a separate neverallow. I\u0027m not sure why these domains have access, but this CL is neither increasing nor decreasing their access.\n\nLet\u0027s see how that does in presubmit.",
      "parentUuid": "43c95197_bf54b27d",
      "range": {
        "startLine": 19,
        "startChar": 58,
        "endLine": 19,
        "endChar": 64
      },
      "revId": "cbd896d802c571c6c73cb341b06b1c5c3cf93974",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bade4dce_eee54a35",
        "filename": "public/app.te",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-07-22T10:33:15Z",
      "side": 1,
      "message": "these need to be enforced by a neverallow.",
      "range": {
        "startLine": 69,
        "startChar": 33,
        "endLine": 69,
        "endChar": 50
      },
      "revId": "cbd896d802c571c6c73cb341b06b1c5c3cf93974",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92758a2b_a7b3e75f",
        "filename": "public/app.te",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-07-22T10:39:46Z",
      "side": 1,
      "message": "They are - see mlstrustedsubject.te.\n\nThat\u0027s possibly the wrong place; it wasn\u0027t clear to me where they should go.",
      "parentUuid": "bade4dce_eee54a35",
      "range": {
        "startLine": 69,
        "startChar": 33,
        "endLine": 69,
        "endChar": 50
      },
      "revId": "cbd896d802c571c6c73cb341b06b1c5c3cf93974",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}