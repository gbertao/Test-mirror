{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c952cb5a_9c5fb704",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-09-26T10:36:02Z",
      "side": 1,
      "message": "I don\u0027t think you need this; domain_auto_trans grants the permissions you need anyway (via domain_trans).",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 51
      },
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1bcb34ee_908ca000",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 16,
      "author": {
        "id": 1937565
      },
      "writtenOn": "2022-09-26T12:02:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c952cb5a_9c5fb704",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 51
      },
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfbf87e4_6b1385d2",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-09-26T10:36:02Z",
      "side": 1,
      "message": "These 2 lines should be in dumpstate.te.\n(The convention is foo.te should contain all the things foo is able to do.)",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4142caef_fabd9cf3",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 17,
      "author": {
        "id": 1937565
      },
      "writtenOn": "2022-09-26T12:02:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bfbf87e4_6b1385d2",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba6e054c_7a73a187",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 1060959
      },
      "writtenOn": "2022-09-26T10:26:19Z",
      "side": 1,
      "message": "Do we need shell_data_file?",
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67f3aeb4_3722b24b",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-09-26T10:36:02Z",
      "side": 1,
      "message": "Not obviously?",
      "parentUuid": "ba6e054c_7a73a187",
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f54274e_3bf9db19",
        "filename": "private/derive_sdk.te",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 1937565
      },
      "writtenOn": "2022-09-26T12:02:46Z",
      "side": 1,
      "message": "I agree this is unexpected. I added this to get rid of the errors below which seem to prevent dumpstate from getting any data back from its child process, but maybe there\u0027s a better way?\n\n```\n# grepping through logcat after \"adb bugreport\" on a device without\n# allow derive_sdk shell_data_file:file write\n$ rg audit.*shell_data_file /tmp/logcat.txt\n09-26 13:55:16.252  2043  2043 W derive_sdk: type\u003d1400 audit(0.0:4): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15.tmp\" dev\u003d\"dm-38\" ino\u003d8921 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:16.252  2043  2043 W derive_sdk: type\u003d1400 audit(0.0:5): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15-dumpstate_log-1987.txt\" dev\u003d\"dm-38\" ino\u003d8919 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:16.252  2043  2043 W derive_sdk: type\u003d1400 audit(0.0:6): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15.zip\" dev\u003d\"dm-38\" ino\u003d8917 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:20.972  2868  2868 W derive_sdk: type\u003d1400 audit(0.0:10): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15.tmp\" dev\u003d\"dm-38\" ino\u003d8921 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:20.972  2868  2868 W derive_sdk: type\u003d1400 audit(0.0:11): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15-dumpstate_log-1987.txt\" dev\u003d\"dm-38\" ino\u003d8919 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:20.972  2868  2868 W derive_sdk: type\u003d1400 audit(0.0:12): avc: denied { write } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/bugreport-aosp_oriole-AOSP.MASTER-2022-09-26-13-55-15.zip\" dev\u003d\"dm-38\" ino\u003d8917 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n09-26 13:55:20.972  2868  2868 W derive_sdk: type\u003d1400 audit(0.0:13): avc: denied { read append } for path\u003d\"/data/user_de/0/com.android.shell/files/bugreports/dumptrace_hvjZGB\" dev\u003d\"dm-38\" ino\u003d8925 scontext\u003du:r:derive_sdk:s0 tcontext\u003du:object_r:shell_data_file:s0 tclass\u003dfile permissive\u003d0\n```",
      "parentUuid": "67f3aeb4_3722b24b",
      "revId": "0e5da6268bdcaba794dd9c7ba0169c1f26bd7181",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}