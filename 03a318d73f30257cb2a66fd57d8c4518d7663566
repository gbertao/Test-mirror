{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1f4f7b02_bf07a9c9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-09-26T10:14:08Z",
      "side": 1,
      "message": "Why does it need that? Where did the work it\u0027s now doing use to happen?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "03a318d73f30257cb2a66fd57d8c4518d7663566",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "704f4079_337ed680",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-26T10:33:56Z",
      "side": 1,
      "message": "artd needs to create a reference profile in `/data/misc/profiles/ref/...`, merge it with current profiles in `/data/misc/profiles/cur/...`, and delete current profiles after the merge.\n\nThis is currently done by installd (http://cs/android-internal/system/sepolicy/public/installd.te;l\u003d125;rcl\u003d0cbe233cdc361b0976874b2df04392d74245aade), and we\u0027d like artd to do it.\n\nIn addition, we want to make artd work in a more atomic way: If a reference profile already exists, instead of mutating it in place, artd creates a temp file next to it, works on the temp file, and replaces the original file after it\u0027s done (or deletes the temp file if it fails).",
      "parentUuid": "1f4f7b02_bf07a9c9",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 63
      },
      "revId": "03a318d73f30257cb2a66fd57d8c4518d7663566",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b701f819_e07b298c",
        "filename": "private/artd.te",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-09-26T10:14:08Z",
      "side": 1,
      "message": "I notice appdomain has add_name but not remove_name permission. Is that sufficient here?\nWill the appdomain permission remain or are you planning to remove it?",
      "range": {
        "startLine": 65,
        "startChar": 38,
        "endLine": 65,
        "endChar": 50
      },
      "revId": "03a318d73f30257cb2a66fd57d8c4518d7663566",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5d1051b3_2b3ccbd5",
        "filename": "private/artd.te",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-09-26T10:33:56Z",
      "side": 1,
      "message": "Having add_name is not sufficient here. See my comment above. artd needs to delete current profiles after the contents has been merged into the reference profile. It also needs to delete temp files.\n\nappdomain needs add_name so that it can create a current profile in order to write new entries after the profile is deleted by artd.\n\nBTW, I was hoping that appdomain has remove_name as well so that it can work in the atomic way that I described above like artd, but unfortunately it doesn\u0027t have remove_name, and even if we can update appdomain rules, the change won\u0027t affect old platforms, so we have to live with this limitation.",
      "parentUuid": "b701f819_e07b298c",
      "range": {
        "startLine": 65,
        "startChar": 38,
        "endLine": 65,
        "endChar": 50
      },
      "revId": "03a318d73f30257cb2a66fd57d8c4518d7663566",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}