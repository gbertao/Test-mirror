{
  "comments": [
    {
      "key": {
        "uuid": "c377a595_fe7faf5b",
        "filename": "private/file_contexts",
        "patchSetId": 5
      },
      "lineNbr": 168,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-11-18T20:31:15Z",
      "side": 1,
      "message": "this is an overly broad grant. What specific nodes are used by slcan?\n\nThe typical strategy for handling this is to create a new label (for example, \"slcan_device\"), and use device-specific policy to label the exact nodes used by the domain. See, for example, the handling of \"system_block_device\", which is the device node corresponding to the /system partition.",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 168,
        "endChar": 51
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68b96eea_ef8ad31b",
        "filename": "private/file_contexts",
        "patchSetId": 5
      },
      "lineNbr": 168,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2019-11-18T20:42:28Z",
      "side": 1,
      "message": "How is it more broad that the grant one line above (ttyS)? The only difference here is how the serial port is connected to the system (ttyS is onboard, ttyUSB/ttyACM is via USB).\n\nThere is no specific node we could use for slcan, as the serial port number assignment for USB is more or less \"random\".",
      "parentUuid": "c377a595_fe7faf5b",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 168,
        "endChar": 51
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53b758c3_7fc4b65c",
        "filename": "private/file_contexts",
        "patchSetId": 5
      },
      "lineNbr": 168,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-11-18T21:36:50Z",
      "side": 1,
      "message": "Can you clarify what you mean by \"random\"? Is it stable on the same hardware, but varies across different hardware devices? If it is random, how does the slcan code know which /dev/ node to use to use?\n\n/dev/ttyS* is similarly overly broad, and it\u0027s been problematic for exactly the same reason. I\u0027m trying to avoid making the problem worse.",
      "parentUuid": "68b96eea_ef8ad31b",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 168,
        "endChar": 51
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cff1e2c_6e4157d1",
        "filename": "vendor/hal_can_socketcan.te",
        "patchSetId": 5
      },
      "lineNbr": 19,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-11-15T04:47:35Z",
      "side": 1,
      "message": "why is this stuff on a specific domain instead of on the hal_*_server attributes? If it\u0027s device-specific, the domain shouldn\u0027t be specified here. If these are generic policy, we shouldn\u0027t force them to be on a specific domain.",
      "range": {
        "startLine": 19,
        "startChar": 6,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee3a7453_f1bb90e0",
        "filename": "vendor/hal_can_socketcan.te",
        "patchSetId": 5
      },
      "lineNbr": 19,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2019-11-15T16:47:10Z",
      "side": 1,
      "message": "I assume you mean hal_can_controller_server.\n\nThis is something that\u0027s between device-specific and generic policy. Not every CAN controller will need access to SocketCAN interfaces, but this kind of controller is quite common and worth providing a ready-to-use domain (thus the policies are added to vendor/hal_can_socketcan).\n\nIf not here, where it should be specified?",
      "parentUuid": "6cff1e2c_6e4157d1",
      "range": {
        "startLine": 19,
        "startChar": 6,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5179cdb_78b0e653",
        "filename": "vendor/hal_can_socketcan.te",
        "patchSetId": 5
      },
      "lineNbr": 19,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-11-18T19:08:47Z",
      "side": 1,
      "message": "No, I see now. hal_can_socketcan is a specific domain. WFM",
      "parentUuid": "ee3a7453_f1bb90e0",
      "range": {
        "startLine": 19,
        "startChar": 6,
        "endLine": 19,
        "endChar": 23
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa1eb3c8_e570e317",
        "filename": "vendor/hal_can_socketcan.te",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-11-18T20:31:15Z",
      "side": 1,
      "message": "instead of using the existing label \"serial_device\" (which is used by other processes in policy), we should create a new label for this, perhaps called \"slcan_device\", which can be used to label the exact /dev nodes used by the hal_can_socketcan code. The use of \"serial_device\" is too generic and grants access to too many device nodes.",
      "range": {
        "startLine": 28,
        "startChar": 24,
        "endLine": 28,
        "endChar": 37
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b36f98a0_8c728cba",
        "filename": "vendor/hal_can_socketcan.te",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2019-11-18T20:42:28Z",
      "side": 1,
      "message": "Would usb_serial_device work better for you? SLCAN devices show up as a regular serial port (not distinguishable from one) until you send some bytes to it to initialize the protocol.",
      "parentUuid": "aa1eb3c8_e570e317",
      "range": {
        "startLine": 28,
        "startChar": 24,
        "endLine": 28,
        "endChar": 37
      },
      "revId": "4279070a6421019c4396d87f485828bc3cc828ca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}