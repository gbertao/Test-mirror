{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c661f2a1_1254dbbe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2021-03-10T06:35:17Z",
      "side": 1,
      "message": "Seems ok to me as we still have neverallow rules to avoid unnecessary access.\n\nLet\u0027s see if David, Jeff have other thoughts or not.",
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "410660a1_c2cfd675",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-15T04:10:48Z",
      "side": 1,
      "message": "ping, Jeff PTAL",
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "224183b1_63f1a48f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1080813
      },
      "writtenOn": "2021-03-15T04:15:34Z",
      "side": 1,
      "message": "Just found that this change is relevant to aosp/1600874.\n\nBut Yo\u0027s change here seems fix the fundamental issue rather than allowing specific domain (e.g., ueventd) to access gsi_public_metadata_file.\n\nThought?",
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e714895_9118c9ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-15T05:52:15Z",
      "side": 1,
      "message": "Yeah aosp/1600874 seems to be fixing the same issue for the \"dumpstate\" process. However it is only allowing \"gsi_metadata_file:dir search\" but not \"gsi_metadata_file:file read\" so I suspect the fix (aosp/1600874) alone is not enough to make the denials go away.\n\nI\u0027d like to submit this change so we don\u0027t need to add rules to specific domain every time we see a new denial, and we can avoid the case like aosp/1600874 where some allow rules are missed.",
      "parentUuid": "224183b1_63f1a48f",
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af29065a_7c43bcad",
        "filename": "private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-15T17:34:52Z",
      "side": 1,
      "message": "Why is this desirable? Why do 3p apps need access to files here?",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 41
      },
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb90bf5f_5b0f554c",
        "filename": "private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-15T17:39:40Z",
      "side": 1,
      "message": "An example was that vendor ramdump service would want to read the fstab through libfstab, which read() / faccess() these files to determine the fstab.\n\nIf we don\u0027t have this rule, then different process would see different fstab, depending on whether the process has the access rights to these files or not.",
      "parentUuid": "af29065a_7c43bcad",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 41
      },
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb8a63b4_18a06f09",
        "filename": "private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-03-16T12:47:32Z",
      "side": 1,
      "message": "That doesn\u0027t answer my question.\n\nSelinux policy should follow the principle of least privilege. Only selinux domains that require access should be granted access. If vendor ramdump service requires access, then trant it access, but that\u0027s not what this change does. This change grants everything access.",
      "parentUuid": "bb90bf5f_5b0f554c",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 41
      },
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "463994fa_e602abb3",
        "filename": "private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-16T13:20:59Z",
      "side": 1,
      "message": "(1) Since libfstab is linkable by any domain, and libfstab reads these files, I thought it\u0027s reasonable to make these files world-readable, like \"/vendor/etc/fstab\" is already world-readable.\n(2) I cannot modify the vendor policies. This access denial happens when testing CTS-on-GSI, where system in S GSI and vendor is S, R, Q. Adding this allow rule to domain solves this problem without modifying vendor policies.",
      "parentUuid": "bb8a63b4_18a06f09",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 41
      },
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f25e8cd_73116993",
        "filename": "private/domain.te",
        "patchSetId": 1
      },
      "lineNbr": 101,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2021-03-16T13:29:09Z",
      "side": 1,
      "message": "I mean, I think gsi_public_metadata_file should be world readable like /vendor/etc/fstab, because they are accessed at the same time.\ngranting a domain only the read access of fstab but not gsi metadata files doesn\u0027t make sense",
      "parentUuid": "463994fa_e602abb3",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 101,
        "endChar": 41
      },
      "revId": "6419a14732601049dceeaaf56b6bace796e9ccd6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}