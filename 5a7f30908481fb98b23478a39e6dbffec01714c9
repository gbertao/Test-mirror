{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1705ebeb_1ce0d5ad",
        "filename": "private/service.te",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-02-02T21:26:39Z",
      "side": 1,
      "message": "Sorry to comment on this - saw thread, and this is the first framework HAL. We should keep this consistent w/ HIDL framework HALs (analogue of fwk_stats_hwservice):\n- s/hal_/fwk_/\n- move to public/service.te (so this can be used by vendor.img clients, otherwise it shouldn\u0027t be a HAL)\n- mark as vendor_service\n- (consider) fwk_stats_client attribute, if there are any permissions that would be associated with using this. Specifically, the problem we are running into now, because this wasn\u0027t done before, is you need to find everything that was a client of fwk_stats_hwservice and make it a client of fwk_stats_service (since - IIRC or that is assuming: the client code is abstracted in a library? people don\u0027t call the HIDL directly?).\n\nPlease do check this in with an example of a client actually using this (this service can\u0027t be used with the current policy). I\u0027m also happy to help/chat if there any other issues with this, since it is the first fwk_ AIDL HAL that I know of.",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 80
      },
      "revId": "5a7f30908481fb98b23478a39e6dbffec01714c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8822255_c42d9bc8",
        "filename": "private/service.te",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-02-02T21:27:47Z",
      "side": 1,
      "message": "Oops - actually - this should not be \"vendor_service\", I was misremembering part of the design, but everything else there should be correct.",
      "parentUuid": "1705ebeb_1ce0d5ad",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 80
      },
      "revId": "5a7f30908481fb98b23478a39e6dbffec01714c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5b61d13_2f6139c1",
        "filename": "private/service.te",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-03T00:24:04Z",
      "side": 1,
      "message": "- I did service type rename\n- Moved to the public\n- fwk_stats_client - TBD\n- The service is working and APIs are executed based on the sample aidl_stats_client",
      "parentUuid": "b8822255_c42d9bc8",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 80
      },
      "revId": "5a7f30908481fb98b23478a39e6dbffec01714c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5367d187_cde8cc76",
        "filename": "private/service.te",
        "patchSetId": 1
      },
      "lineNbr": 4,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-02-03T01:11:19Z",
      "side": 1,
      "message": "All lg to me. I assume this test client is running as root? I\u0027m curious if it\u0027s possible to also show the client policy here (or in a separate CL).\n\nThe reason I ask this is that currently a client of this HAL requires two policy lines:\n- allow ... fwk_stats_hwservice:hwservice_manager find;\n- binder_call(..., statsd);\n\nI believe after that, we\u0027ll need to update all those old places with something ****like****:\n- allow ... fwk_stats_service:hwservice_manager find;\n- binder_call(..., system_server);\n\nIf this requirement needs to apply everywhere simultaneously, then it would be worth doing the effort to introduce the client attribute, since although this would have to be applied to all of the existing clients, it would prevent this problem in the future.\n\nIf it is an internal client in review, that\u0027s fine, but I\u0027d like to see what it looks like. Maybe no change is required here, in which case we can just +2.",
      "parentUuid": "b5b61d13_2f6139c1",
      "range": {
        "startLine": 4,
        "startChar": 0,
        "endLine": 4,
        "endChar": 80
      },
      "revId": "5a7f30908481fb98b23478a39e6dbffec01714c9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}