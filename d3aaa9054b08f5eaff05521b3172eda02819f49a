{
  "comments": [
    {
      "key": {
        "uuid": "99b8fd5f_c7ecc3d5",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 27,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-05-07T07:31:05Z",
      "side": 1,
      "message": "brackets are unnecessary when only granting a single permission.",
      "range": {
        "startLine": 27,
        "startChar": 46,
        "endLine": 27,
        "endChar": 47
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "490a300c_80b6c43d",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 27,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T01:12:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "99b8fd5f_c7ecc3d5",
      "range": {
        "startLine": 27,
        "startChar": 46,
        "endLine": 27,
        "endChar": 47
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9eba7ab_e00180ed",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-05-07T07:31:05Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 28,
        "startChar": 46,
        "endLine": 28,
        "endChar": 47
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fefa29de_cd09252e",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 28,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T01:12:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b9eba7ab_e00180ed",
      "range": {
        "startLine": 28,
        "startChar": 46,
        "endLine": 28,
        "endChar": 47
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfda023b_46c3fed5",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-05-07T07:31:05Z",
      "side": 1,
      "message": "create_socket_perms_no_ioctl",
      "range": {
        "startLine": 29,
        "startChar": 34,
        "endLine": 29,
        "endChar": 81
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "736162bd_0c8ce3a7",
        "filename": "private/fastbootd.te",
        "patchSetId": 7
      },
      "lineNbr": 29,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T01:12:52Z",
      "side": 1,
      "message": "I changed to it, but the \"accept\" and \"listen\" permissions are still needed.",
      "parentUuid": "dfda023b_46c3fed5",
      "range": {
        "startLine": 29,
        "startChar": 34,
        "endLine": 29,
        "endChar": 81
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74b6f477_2f414ba4",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-05-07T11:07:38Z",
      "side": 1,
      "message": "If we used link-local IPv6 instead of IPv4 we\u0027d avoid the need for net_raw and udp_socket. Link-local addresses are configured automatically when the interface comes up and can be used immediately with no setup.",
      "range": {
        "startLine": 30,
        "startChar": 62,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd54a88e_7562d1ee",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T01:12:52Z",
      "side": 1,
      "message": "I did it. The \"net_raw\" permission is removed. But I still need the udp_socket to bring up interface. Is there way to us to bring up interface without udp_socket?",
      "parentUuid": "74b6f477_2f414ba4",
      "range": {
        "startLine": 30,
        "startChar": 62,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3abb9dae_b15979e2",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-05-13T10:33:05Z",
      "side": 1,
      "message": "Is netd running at this point in time? If so, then we could avoid the need for NET_ADMIN by sending an IPC to netd to configure the interface. We\u0027d need the ability to find the netd binder service, and send IPCs to it.\n\nIf at this point in time netd is not running, or might not be running, or we don\u0027t want to take the extra dependency because it might make flashing unreliable, then I don\u0027t think there\u0027s a way to do this that does not require net_admin.\n\nAs for udp_socket, that\u0027s not really much of a risk. But you can call ioctl(SIOCSIFFLAGS) on a tcp socket too, if you want. I just tested and it seems to work.",
      "parentUuid": "bd54a88e_7562d1ee",
      "range": {
        "startLine": 30,
        "startChar": 62,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e92a1826_8eda3320",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 30,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T16:37:21Z",
      "side": 1,
      "message": "There is no netd in recovery mode. I moved to TCP socket, it works well. Thank you!\n\nDone",
      "parentUuid": "3abb9dae_b15979e2",
      "range": {
        "startLine": 30,
        "startChar": 62,
        "endLine": 30,
        "endChar": 69
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0cb2537_4860362c",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 32,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-05-07T07:31:05Z",
      "side": 1,
      "message": "Can you specify exactly which ioctls are needed here. Priv_sock_ioctls is overly broad.",
      "range": {
        "startLine": 32,
        "startChar": 44,
        "endLine": 32,
        "endChar": 60
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2922205_8de2844a",
        "filename": "private/recovery.te",
        "patchSetId": 7
      },
      "lineNbr": 32,
      "author": {
        "id": 1608690
      },
      "writtenOn": "2020-05-13T01:12:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f0cb2537_4860362c",
      "range": {
        "startLine": 32,
        "startChar": 44,
        "endLine": 32,
        "endChar": 60
      },
      "revId": "d3aaa9054b08f5eaff05521b3172eda02819f49a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}