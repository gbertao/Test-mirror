{
  "comments": [
    {
      "key": {
        "uuid": "c0abfa98_97224b4c",
        "filename": "public/te_macros",
        "patchSetId": 3
      },
      "lineNbr": 341,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-12-05T02:52:18Z",
      "side": 1,
      "message": "I\u0027m going to leave it up to nnk/jeffv, but would it make sense to require individual services to add this permission since only ones wanting to use registration callbacks/lazy callbacks need this? HIDL has the same rule on L356\n\nAlso, I\u0027m wondering, how were the registration callbacks working before? Were they working at all!? I\u0027m very confused.. It could be that they were actually unneeded in practice. Wow... okay, actually, it seems much safer to keep this, since some of this paths should be hard to hit.\n\nJeff/Nick?",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 341,
        "endChar": 49
      },
      "revId": "e46f1670b1076084c810e6b080c6ed7d1d80b22c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c5c50d37_e4b52b93",
        "filename": "public/te_macros",
        "patchSetId": 3
      },
      "lineNbr": 341,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-12-05T08:44:18Z",
      "side": 1,
      "message": "I would also prefer that we not broadly grant this. It\u0027s unfortunate that we already do for hwservicemanager :(.\n\nServiceManager is reachable by almost every process on Android, and certainly by every app, which makes it a compelling target for privilege escalation. However, once in ServiceManager, further options are limited because ServiceManager is very restricted in what other processes it can reach. That\u0027s no longer true with this change. Particularly concerning is the ability to reach very privileged processes like vold, installd, and zygote. Coupled with running as AID_SYSTEM which grants most permissions, this seems like a very dangerous change.\n\nI agree with Steven, we should limit this to the subset of processes that actually need it.",
      "parentUuid": "c0abfa98_97224b4c",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 341,
        "endChar": 49
      },
      "revId": "e46f1670b1076084c810e6b080c6ed7d1d80b22c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2a5157ef_5e3e2277",
        "filename": "public/te_macros",
        "patchSetId": 3
      },
      "lineNbr": 341,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-12-05T17:16:51Z",
      "side": 1,
      "message": "Wait, sorry, you are disagreeing with me. See the second part of my poorly-worded comment. Can you weigh this against how error prone it is to restrict this? If anyone takes over sm, the existing risk is that they will imitate other services. Making what will be oneway calls is relatively benign, since you would need an additional escalation to take advantage of it.\n\nAlso, Jon, can you answer how it is that this permission wasn\u0027t needed before?",
      "parentUuid": "c5c50d37_e4b52b93",
      "range": {
        "startLine": 340,
        "startChar": 0,
        "endLine": 341,
        "endChar": 49
      },
      "revId": "e46f1670b1076084c810e6b080c6ed7d1d80b22c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}