{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "30a13180_6603c48d",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-07-19T09:01:33Z",
      "side": 0,
      "message": "Don\u0027t we need to add some compat for this?\nWhat about existing vendor policy that references this attribute?",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b6c26b7_c91b6499",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-07-19T14:27:56Z",
      "side": 0,
      "message": "It was only used for neverallows, and it did not have `expandattribute vendor_servce false;`, so this and the parent CL are compile-time only changes (we should probably have an automated way to verify this - I know selinux people used to check the compiled policy doesn\u0027t not change between builds). We can also see if this throws an error against the _rvc builds in presubmit once this is runnable there.",
      "parentUuid": "30a13180_6603c48d",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa0101dc_fe8d3d8e",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-07-19T15:12:00Z",
      "side": 0,
      "message": "Hmm. I\u0027m not entirely convinced. Vendor policy is compiled with the public files as input, so I don\u0027t think there\u0027s any way we can be sure there isn\u0027t a direct reference somewhere we can\u0027t see, e.g. in non-Pixel vendor policy.\nIt\u0027s present in the .cil, even if not in the final policy.",
      "parentUuid": "7b6c26b7_c91b6499",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "705b3a9c_b39bee4a",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-07-19T15:41:38Z",
      "side": 0,
      "message": "Sine the attribute is expanded, it\u0027s compile time only. A vendor reference to the policy would be absorbed into that type at compile time.",
      "parentUuid": "aa0101dc_fe8d3d8e",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7372e55e_c2e0fd60",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-07-19T15:56:11Z",
      "side": 0,
      "message": "I\u0027m going to have to defer to your experience here.\n\nBut I\u0027m still perplexed. E.g. my vendor/etc/selinux/vendor_sepolicy.cil contains \"(typeattributeset vendor_service (...))\"; I\u0027m not sure how that compiles if there is no such attribute in the platform CIL.",
      "parentUuid": "705b3a9c_b39bee4a",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "499c3ad2_7924ad6d",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-08-02T18:28:23Z",
      "side": 0,
      "message": "Hmmm. I also see it at that layer, and it makes sense that expandattribute could be before the runtime layer but after we do this compatibility stuff. Let\u0027s see if this causes a problem. I might have missed a test locally, or if it\u0027s not caught by presubmit, I will also resolve that issue.",
      "parentUuid": "7372e55e_c2e0fd60",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd3f490a_a950758e",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-08-03T08:42:59Z",
      "side": 0,
      "message": "The thing is, lack of breakage in our branches doesn\u0027t meet there won\u0027t be breakage in OEM branches.\nAlso I suspect this will cause problems with GKI builds, but you only seem to find out about those in postsubmit, and not necessarily immediately.",
      "parentUuid": "499c3ad2_7924ad6d",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57775fee_0cd377af",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-08-03T21:54:12Z",
      "side": 0,
      "message": "We have tests specifically designed for a compatibility break which run at build time, and this is something we have all the information to detect if it is an issue.\n\nSince tests like \u0027google_required_freeze/boot_test/vendor_img_cf_x86_rvc on aosp_cf_x86_64_phone-userdebug on aosp-master\u0027 pass in presubmit, which would be compiling policy across dessert releases, we know the policy works together from one vendor to another. Though, cuttlefish vendor may not use \u0027vendor_service\u0027 attribute, we should still be suspicious that it will break.\n\n\u003e Example Version 2: Removing completely (foo type)\n\nFrom the SELinux docs, they suggest that we should add a type here.\n\nThough, I have two questions:\n- does this apply to expandattribute?\n- why doesn\u0027t our test catch it?",
      "parentUuid": "bd3f490a_a950758e",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f91abb8_43a5f2ad",
        "filename": "public/attributes",
        "patchSetId": 1
      },
      "lineNbr": 187,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2022-08-04T00:44:41Z",
      "side": 0,
      "message": "Old vendors aren\u0027t affected by removal of attributes. Take a look at plat_pub_versioned.cil; it contains all versioned public types/(unversioned) attributes/allow statements.\n\nThe problem is the removal of types.",
      "parentUuid": "57775fee_0cd377af",
      "range": {
        "startLine": 187,
        "startChar": 0,
        "endLine": 187,
        "endChar": 25
      },
      "revId": "6d12d643e3a095f2564e06f4375fc718af27982b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}