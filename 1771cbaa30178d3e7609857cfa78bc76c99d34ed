{
  "comments": [
    {
      "key": {
        "uuid": "c62f9cda_6df8c941",
        "filename": "prebuilts/api/29.0/private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-07-24T16:16:29Z",
      "side": 1,
      "message": "The files in the prebuilt directory shouldn\u0027t be modified. API 29 is already locked. This change should be reverted.",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47993b89_a6b1e8be",
        "filename": "prebuilts/api/29.0/private/property_contexts",
        "patchSetId": 1
      },
      "lineNbr": 152,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-07-24T16:16:29Z",
      "side": 1,
      "message": "The files in the prebuilt directory shouldn\u0027t be modified. API 29 is already locked. This change should be reverted.",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04bd71d8_d05287b1",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-07-24T16:16:29Z",
      "side": 1,
      "message": "Looking at b/137039363, the SELinux denial is:\n\n07-15 18:12:47.359  1246  1246 W com.android.car: type\u003d1400 audit(0.0:204): avc: denied { create } for scontext\u003du:r:carservice_app:s0 tcontext\u003du:r:carservice_app:s0 tclass\u003dnetlink_route_socket permissive\u003d0\n\nThis should be netlink_route_socket, not netlink_generic_socket.",
      "range": {
        "startLine": 8,
        "startChar": 14,
        "endLine": 8,
        "endChar": 36
      },
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb7bbe4_23cac48a",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-07-24T16:20:22Z",
      "side": 1,
      "message": "OOPS, this is the wrong domain entirely. The SELinux denial above is for \"carservice_app\", where this domain is \"iw\".\n\nDo you have the exact SELinux denial which triggered this? Newer kernels don\u0027t use netlink_generic_socket, but rather, a more specific socket family. \n\nWhat netlink family is being used here?",
      "parentUuid": "04bd71d8_d05287b1",
      "range": {
        "startLine": 8,
        "startChar": 14,
        "endLine": 8,
        "endChar": 36
      },
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2617d1ef_221432de",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2019-07-23T17:26:09Z",
      "side": 1,
      "message": "We really don\u0027t want to add these permissions to anything.  See b/28340421 for some examples.",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a62ab68_6a0d6185",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2019-07-23T18:08:46Z",
      "side": 1,
      "message": "As I understand, all the examples from these bug are about removing net_admin requirement from processes that doesn\u0027t need it. In this case, iw tool is necessary to create secondary wlan interface, so it sounds like it does need this permission and there is no way around it. Am I missing something?",
      "parentUuid": "2617d1ef_221432de",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccdebec9_502c993e",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2019-07-23T18:12:12Z",
      "side": 1,
      "message": "This process has never had these permissions, though.  Was nothing using this functionality before?  Is there no other way to do it by leveraging something that already has this permission?",
      "parentUuid": "3a62ab68_6a0d6185",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b166baf3_abb15cb6",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1135107
      },
      "writtenOn": "2019-07-23T18:16:11Z",
      "side": 1,
      "message": "Our target was using this, but it was running in permissive mode so we didn\u0027t catch this. I don\u0027t know of any other way.",
      "parentUuid": "ccdebec9_502c993e",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65ce2c35_f0ac7a41",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2019-07-23T22:33:24Z",
      "side": 1,
      "message": "Spoke with jgalenson@ offline, we just need to confirm if iw is meant to be used this way. We confirmed it is on all devices. I\u0027ve reached out to rpius@ on wifi to see if we can get that confirmation.",
      "parentUuid": "b166baf3_abb15cb6",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92c41aff_18f43d15",
        "filename": "private/iw.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2019-07-24T16:16:29Z",
      "side": 1,
      "message": "IIRC, the reason why we\u0027re sensitive to CAP_NET_ADMIN and CAP_NET_RAW is because netd is expected to handle all network configuration. Having iw also do it may be contrary to the network team\u0027s goals. \n\n+lorenzo for his opinion.",
      "parentUuid": "65ce2c35_f0ac7a41",
      "revId": "1771cbaa30178d3e7609857cfa78bc76c99d34ed",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}