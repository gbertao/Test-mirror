{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cfb7edfc_70465814",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-12-16T09:41:46Z",
      "side": 1,
      "message": "Is this actually being used on Android, or just ChromeOS?",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 13,
        "endChar": 35
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a864533_e05cd5a9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-12-16T17:53:08Z",
      "side": 1,
      "message": "Well, the idea is to use it on everything.\n\nThe motivating bug problem where functionality breaks down is for the Android emulator (and also potentially any x86 Android devices). The problem is that the suspend path sends a message which wakes up userspace here. However, the idea is to use this on all Android deivces since we should have a way to avoid waking up userspace.",
      "parentUuid": "cfb7edfc_70465814",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 13,
        "endChar": 35
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b1e4f59_979aeee5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T00:37:33Z",
      "side": 1,
      "message": "obsolete.",
      "parentUuid": "2a864533_e05cd5a9",
      "range": {
        "startLine": 11,
        "startChar": 0,
        "endLine": 13,
        "endChar": 35
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b44fd99_8513eb81",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-12-16T09:41:46Z",
      "side": 1,
      "message": "Alternatively, we could use -hal_health_server in this neverallow rule. But that may go against your goal of opening this up more broadly to vendor use.",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 74
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c3b3a33_3a7f27b7",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-12-16T17:53:08Z",
      "side": 1,
      "message": "I simply commented it out because I wanted to talk about the plan here. What kind of restrictions would make sense here? Should I add an expanded \u0027bpfuser\u0027 attribute to use here so we can write policy more easily about those processes which use bpf?",
      "parentUuid": "4b44fd99_8513eb81",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 74
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0feeb9b1_9e8c31d8",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 18,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T00:37:33Z",
      "side": 1,
      "message": "obsolete.",
      "parentUuid": "7c3b3a33_3a7f27b7",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 74
      },
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0bfc83f_064f3641",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2019-12-16T09:41:46Z",
      "side": 1,
      "message": "Can we limit bpfloader\u0027s filesystem access to just /system/etc/bpf and /vendor/etc/bpf? That would make it easier to reason about what\u0027s going on, and to fully enforce verified boot on bpf programs in the future.",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f60fc30_9de69dfe",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2019-12-16T17:53:08Z",
      "side": 1,
      "message": "Yeah, I can do that.",
      "parentUuid": "a0bfc83f_064f3641",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68037d3d_563ef3cd",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T00:37:33Z",
      "side": 1,
      "message": "still relevant? can you file a bug in the systems component?",
      "parentUuid": "8f60fc30_9de69dfe",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "102eb141_a7c24347",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-08T00:48:59Z",
      "side": 1,
      "message": "+1 to Jeffrey",
      "parentUuid": "8f60fc30_9de69dfe",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ea382bd_b511e007",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T00:59:59Z",
      "side": 1,
      "message": "The access to */etc/* files are given because bpfloader is domain, right? This is a pretty far-reaching request, not specific to bpfloader? It would require cleaning up every domain?",
      "parentUuid": "102eb141_a7c24347",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "069f916d_25447ab4",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-08T01:15:45Z",
      "side": 1,
      "message": "IIUC, what Jeffrey asked seems to be creating new label(s) for files in [system/vendor]/etc/bpf and let only bpfloader have access to the files. And at the same time, bpfloader wouldn\u0027t have access to files outside of the directories. I think it could be achieved by making it a whole static binary so that it doesn\u0027t need to access the libraries in /system/lib.\n\nI personally am fine with not addressing that in this CL, but let me leave this thread open to hear what Jeffrey thinks.",
      "parentUuid": "2ea382bd_b511e007",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39198b1e_1af086c1",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1115183
      },
      "writtenOn": "2022-02-08T01:24:29Z",
      "side": 1,
      "message": "Is this complicated at all by mainline bpf programs? I don\u0027t think those are located in /system/etc/bpf/.",
      "parentUuid": "069f916d_25447ab4",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b263e92_42efef35",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T01:28:42Z",
      "side": 1,
      "message": "Right, if we still want this, it would be 3 different directories, a 3rd for tethering.",
      "parentUuid": "39198b1e_1af086c1",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85caf886_57e0355b",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-02-08T01:30:14Z",
      "side": 1,
      "message": "oh no, have they been labeled as just system_file? [1] says they are. If so, I think it\u0027s game over and we can\u0027t label them differently as doing so will break the modules on older platforms. What is the oldest Mainline module that has bpf programs in it?\n\n[1] https://source.corp.google.com/search?q\u003df:system%5C%2Fsepolicy%20f:apex%20f:file_contexts%20c:bpf\u0026sq\u003dpackage:%5Eandroid$",
      "parentUuid": "39198b1e_1af086c1",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "833fd38c_5faaa96b",
        "filename": "private/bpfloader.te",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-02-08T22:15:53Z",
      "side": 1,
      "message": "It\u0027s the tethering module, seems min_sdk_version: \"30\",",
      "parentUuid": "85caf886_57e0355b",
      "revId": "cd1cebcc078d74e5cb94e37a9881750f0829c215",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}