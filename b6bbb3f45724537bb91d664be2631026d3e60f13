{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "16aeddda_19c87f96",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2021-11-17T13:04:18Z",
      "side": 1,
      "message": "This feels like we\u0027re just papering over the problem. This CL just prevents system_server from being killed, but we could just as well erroneously kill another app that just happened to spawn a thread.\n\nWe should really make sure that kills from the system_server are safe (take the intended UID into account).\n\nCan you point out which part of the system_server is doing this kill?",
      "range": {
        "startLine": 18,
        "startChar": 3,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "b6bbb3f45724537bb91d664be2631026d3e60f13",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c858ca7_98a867a8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1102879
      },
      "writtenOn": "2021-11-17T13:16:52Z",
      "side": 1,
      "message": "1. Not exactly, this CL is to prevent zygote from being killed by system_server, but not vice versa.\n\n2. Yes, this CL doesn\u0027t cover other process being mistakenly killed by system_server, thats out of this CL\u0027s scope and I agree with your idea(take the intended UID into account, and it seems a lot of work/code)\n\n3. Anyway, system_server should have the permission to kill zygote",
      "parentUuid": "16aeddda_19c87f96",
      "range": {
        "startLine": 18,
        "startChar": 3,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "b6bbb3f45724537bb91d664be2631026d3e60f13",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bb67f30_d0cf10a4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1102879
      },
      "writtenOn": "2021-11-17T13:20:35Z",
      "side": 1,
      "message": "Typo\n3. Anyway, system_server should **not** have the permission to kill zygote",
      "parentUuid": "6c858ca7_98a867a8",
      "range": {
        "startLine": 18,
        "startChar": 3,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "b6bbb3f45724537bb91d664be2631026d3e60f13",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2a9d11d_545bcdcd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1102879
      },
      "writtenOn": "2021-11-17T13:21:46Z",
      "side": 1,
      "message": "Can you point out which part of the system_server is doing this kill?\n-----------------\nActivityManagerService",
      "parentUuid": "1bb67f30_d0cf10a4",
      "range": {
        "startLine": 18,
        "startChar": 3,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "b6bbb3f45724537bb91d664be2631026d3e60f13",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a72d8f29_238d3d61",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1013030
      },
      "writtenOn": "2021-11-17T13:26:06Z",
      "side": 1,
      "message": "1. Sure; but there\u0027s not really a need to prevent it if the implementation were correct in the first place.\n\n2. Yes, it might be some work, but this is actually a serious bug that we should fix.\n\n3. I\u0027m confused - do you mean \"should *not* have the permission\"?\n\nAnyway, you can argue this CL doesn\u0027t really harm anything, but I\u0027m not entirely convinced that we know of all code paths where the system_server tries to kill Zygote, which would now fail because of this CL.\n\nIf you want to say \"system_server should not be able to kill Zygote\", I\u0027m ok with that if you are sure this will not cause any other issues.\n\nBut if the point of this change is to prevent this particular race condition, I think we should work on the proper fix instead.",
      "parentUuid": "6c858ca7_98a867a8",
      "range": {
        "startLine": 18,
        "startChar": 3,
        "endLine": 20,
        "endChar": 38
      },
      "revId": "b6bbb3f45724537bb91d664be2631026d3e60f13",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}