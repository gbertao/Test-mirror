{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6dc41904_c45857fd",
        "filename": "private/technical_debt.cil",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-12-13T08:01:35Z",
      "side": 1,
      "message": "why have you made these changes?",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 1
      },
      "revId": "6895d328c9ff1827d49d9e702a27322055eb69fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8eed3562_d15b09cb",
        "filename": "private/technical_debt.cil",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1005970
      },
      "writtenOn": "2021-12-13T08:47:28Z",
      "side": 1,
      "message": "Hi Jeffrey, thank you for reviewing these changes.\n\nWhile trying to fix avc: denied errors, I ran into the following compiler errors:\nFAILED: out/target/product/sunfish/obj/ETC/precompiled_sepolicy_intermediates/precompiled_sepolicy\n/bin/bash -c \"out/host/linux-x86/bin/secilc -m -M true -G -c 30  \t\tout/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil out/target/product/sunfish/system/etc/selinux/mapping/10000.0.cil out/target/product/sunfish/obj/ETC/plat_pub_versioned.cil_intermediates/plat_pub_versioned.cil out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil out/target/product/sunfish/obj/ETC/system_ext_sepolicy.cil_intermediates/system_ext_sepolicy.cil out/target/product/sunfish/obj/ETC/product_sepolicy.cil_intermediates/product_sepolicy.cil out/target/product/sunfish/product/etc/selinux/mapping/10000.0.cil -o out/target/product/sunfish/obj/ETC/precompiled_sepolicy_intermediates/precompiled_sepolicy -f /dev/null\"\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18339 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow mediaprovider_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18338 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_25 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18337 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_27 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18336 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_29 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18335 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_30 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18334 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18333 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow mediaprovider protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18331 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow ephemeral_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18330 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_all protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nFailed to generate binary\nFailed to build policydb\n[ 45% 70/154] build out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy\nFAILED: out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy\n/bin/bash -c \"(out/host/linux-x86/bin/secilc -m -M true -G -c 30  out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil out/target/product/sunfish/system/etc/selinux/mapping/10000.0.cil out/target/product/sunfish/obj/ETC/plat_pub_versioned.cil_intermediates/plat_pub_versioned.cil out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil out/target/product/sunfish/obj/ETC/system_ext_sepolicy.cil_intermediates/system_ext_sepolicy.cil out/target/product/sunfish/obj/ETC/product_sepolicy.cil_intermediates/product_sepolicy.cil out/target/product/sunfish/product/etc/selinux/mapping/10000.0.cil -o out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.tmp -f /dev/null ) \u0026\u0026 (out/host/linux-x86/bin/sepolicy-analyze out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.tmp permissive \u003e out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.permissivedomains ) \u0026\u0026 (if [ \\\"userdebug\\\" \u003d \\\"user\\\" -a -s out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.permissivedomains ]; then \t\techo \\\"\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\\\" 1\u003e\u00262; \t\techo \\\"ERROR: permissive domains not allowed in user builds\\\" 1\u003e\u00262; echo \\\"List of invalid domains:\\\" 1\u003e\u00262; \t\tcat out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.permissivedomains 1\u003e\u00262; \t\texit 1; \t\tfi ) \u0026\u0026 (mv out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy.tmp out/target/product/sunfish/obj/ETC/sepolicy_intermediates/sepolicy )\"\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18339 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow mediaprovider_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18338 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_25 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18337 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_27 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18336 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_29 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18335 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_30 protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18334 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18333 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow mediaprovider protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18331 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow ephemeral_app protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nneverallow check failed at out/target/product/sunfish/obj/ETC/plat_sepolicy.cil_intermediates/plat_sepolicy.cil:18330 from system/sepolicy/private/app_neverallows.te:230\n  (neverallow untrusted_app_all protected_service (service_manager (find)))\n    \u003croot\u003e\n    allow at out/target/product/sunfish/obj/ETC/vendor_sepolicy.cil_intermediates/vendor_sepolicy.cil:4141\n      (allow hal_drm_client hal_drm_service_10000_0 (service_manager (find)))\n\nFailed to generate binary\nFailed to build policydb\n00:42:21 ninja failed with: exit status 1\n\nRBE Stats: Downloaded: 0 B, Uploaded: 0 B\n\n\nsmorland@ mentioned the neverallow check failed is from this rule. If I comment this line out, the compiling error does not appear.\n\nWhat should be the correct way to fix the above errors?",
      "parentUuid": "6dc41904_c45857fd",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 1
      },
      "revId": "6895d328c9ff1827d49d9e702a27322055eb69fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93ed3c5b_95cae3fa",
        "filename": "private/technical_debt.cil",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 1043093
      },
      "writtenOn": "2022-01-26T18:27:36Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8eed3562_d15b09cb",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 27,
        "endChar": 1
      },
      "revId": "6895d328c9ff1827d49d9e702a27322055eb69fe",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}