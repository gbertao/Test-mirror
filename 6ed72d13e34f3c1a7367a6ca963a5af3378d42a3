{
  "comments": [
    {
      "key": {
        "uuid": "ab523ec4_e65100d6",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T20:16:28Z",
      "side": 1,
      "message": "why can\u0027t these permissions just be granted to logcat on debug builds? I don\u0027t see the reasoning for two separate domains here.",
      "range": {
        "startLine": 8,
        "startChar": 8,
        "endLine": 8,
        "endChar": 18
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_066bfc88",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 8,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T20:18:22Z",
      "side": 1,
      "message": "Nevermind on this point. I just got caught up on the bug.",
      "parentUuid": "ab523ec4_e65100d6",
      "range": {
        "startLine": 8,
        "startChar": 8,
        "endLine": 8,
        "endChar": 18
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_861a8cd8",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-09-13T19:34:57Z",
      "side": 1,
      "message": "on aosp-master (x86 and arm) build this appears to be giving us a headache? Internal master has no problems.\n\nlibsepol.expand_terule_helper: conflicting TE rule for (init, logcat_exec:process):  old was logpersist, new is logd",
      "range": {
        "startLine": 11,
        "startChar": 1,
        "endLine": 11,
        "endChar": 50
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_66cbd09d",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T20:16:28Z",
      "side": 1,
      "message": "This is slick, but not really the selinux way of doing it :(\n\nWe could either\n\n1) define an attribute for common logging functions and then have logcat and logpersist inherit it, or\n2) just grant logcat and logcat_persist the common permissions.\n\nI\u0027m in favor of 2. My concern with #1 is that if we create a logging attribute in AOSP, I\u0027m concerned that others will start using it for any type of logging, potentially granting lots of unnecessary permissions to processes just because the process is doing some sort of logging.",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 52
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_4657b456",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1032276
      },
      "writtenOn": "2016-09-13T19:34:57Z",
      "side": 1,
      "message": "system/sepolicy/logcat.te:17:ERROR \u0027unknown type su\u0027 at token \u0027;\u0027 on line 13007:\nallow { shell adbd su } logcat_exec:file { getattr open read execute };\n\non userdebug build?\n\nSo a move to userdebug_or_eng for su although prudent, would still be broken :-(",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_262638d6",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T19:53:09Z",
      "side": 1,
      "message": "Definitely need the userdebug_or_eng() since the su type is declared inside a userdebug_or_eng() statement.his breaks for me locally too (same error) even on a userdebug build. Taking a look...",
      "parentUuid": "ab523ec4_4657b456",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_06553ceb",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T19:59:35Z",
      "side": 1,
      "message": "Strange, adding the userdebug_or_eng macro changes the error to:\nsystem/sepolicy/logcat.te:19:ERROR \u0027unknown type logcat_persist\u0027 at token \u0027;\u0027 on line 12923:\n\nwhich should also be in a userdebug_or_eng() statement.",
      "parentUuid": "ab523ec4_262638d6",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_066c5cc5",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T20:03:46Z",
      "side": 1,
      "message": "Ahhh... I see. We build user policy too because it\u0027s what\u0027s used for CTS.\n\nhttps://android-review.googlesource.com/#/c/102722/2\n\nAs an unintended-yet-useful side effect, it catches errors that would otherwise break the user build. :)",
      "parentUuid": "ab523ec4_06553ceb",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 57
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab523ec4_86560ccb",
        "filename": "logcat.te",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2016-09-13T20:16:28Z",
      "side": 1,
      "message": "Should we decide on the two separate domains route, please separate them into logcat.te and logcat_persist.te files.",
      "range": {
        "startLine": 21,
        "startChar": 6,
        "endLine": 21,
        "endChar": 12
      },
      "revId": "6ed72d13e34f3c1a7367a6ca963a5af3378d42a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}