{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3ce49c65_64aedb15",
        "filename": "prebuilts/api/31.0/public/shell.te",
        "patchSetId": 2
      },
      "lineNbr": 162,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2021-08-16T18:21:05Z",
      "side": 1,
      "message": "Thank you for having root-caused this issue and also for having proposed a fix. I think this illustrates that using SELinux types instead of type attributes in a SELinux policy is fragile.\n\nShould the shell have permission to read all sysfs attributes? If so, how about granting the shell read permission for \u0027sysfs_type\u0027 instead of \u0027sysfs\u0027?\n\nPlease note that I only have a basic understanding of SELinux.",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 162,
        "endChar": 23
      },
      "revId": "8b2b951349c452b9371d86f60858aa98f23690ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3586c34_4fb6a6b1",
        "filename": "prebuilts/api/31.0/public/shell.te",
        "patchSetId": 2
      },
      "lineNbr": 162,
      "author": {
        "id": 1137063
      },
      "writtenOn": "2021-08-16T18:28:40Z",
      "side": 1,
      "message": "I don\u0027t know.  Like any other domain, the shell domain shouldn\u0027t have access to more than it needs though.  So unless we\u0027re sure we want to grant access to all of sysfs, I believe we should error on the side of granting access to the specific parts that are needed.",
      "parentUuid": "3ce49c65_64aedb15",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 162,
        "endChar": 23
      },
      "revId": "8b2b951349c452b9371d86f60858aa98f23690ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "580ee9af_bc24d950",
        "filename": "prebuilts/api/31.0/public/shell.te",
        "patchSetId": 2
      },
      "lineNbr": 162,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2021-08-16T18:38:13Z",
      "side": 1,
      "message": "Does \u0027shell\u0027 in this SELinux policy file refer to the shell started by e.g. \u0027adb shell\u0027? If so, one way for analyzing the behavior of an Android device is to log in with \u0027adb shell\u0027 and to examine the values of sysfs attributes. Hence my question.",
      "parentUuid": "b3586c34_4fb6a6b1",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 162,
        "endChar": 23
      },
      "revId": "8b2b951349c452b9371d86f60858aa98f23690ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da29304c_d5520853",
        "filename": "prebuilts/api/31.0/public/shell.te",
        "patchSetId": 2
      },
      "lineNbr": 162,
      "author": {
        "id": 1137063
      },
      "writtenOn": "2021-08-16T18:45:45Z",
      "side": 1,
      "message": "Yes.  But the shell is still supposed to have limited security exposure (unless the device is rooted and \u0027adb root\u0027 has been run).  So the general recommendation to avoid granting permission to do unneeded things still applies.",
      "parentUuid": "580ee9af_bc24d950",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 162,
        "endChar": 23
      },
      "revId": "8b2b951349c452b9371d86f60858aa98f23690ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c9416a35_a926f541",
        "filename": "prebuilts/api/31.0/public/shell.te",
        "patchSetId": 2
      },
      "lineNbr": 162,
      "author": {
        "id": 1869780
      },
      "writtenOn": "2021-08-16T18:59:50Z",
      "side": 1,
      "message": "I think the above clarification is sufficient to mark this comment as resolved.",
      "parentUuid": "da29304c_d5520853",
      "range": {
        "startLine": 162,
        "startChar": 12,
        "endLine": 162,
        "endChar": 23
      },
      "revId": "8b2b951349c452b9371d86f60858aa98f23690ea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}