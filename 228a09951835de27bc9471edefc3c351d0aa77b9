{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8d27e884_6b3d5214",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-03-15T17:28:35Z",
      "side": 1,
      "message": "When was the use removed?\nIt was added in https://r.android.com/348522, and I can see traces of that CL still in the code.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fd9fcef_6759ddbf",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-03-15T18:02:54Z",
      "side": 1,
      "message": "The reason is that \u0027tombstoned:unix_stream_socket\u0027 is that crash_dump_fallback has changed. I can scope this down anymore (though enh might comment if they want to add another neverallow - or perhaps do other cleanup).",
      "parentUuid": "8d27e884_6b3d5214",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3dbaef9d_21d73aa7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-03-15T18:49:27Z",
      "side": 1,
      "message": "tombstoned\u0027s pretty boring anyway, right, unlike debuggerd used to be with its global read/write any process\u0027 memory? so [and here it should be obvious \"i am not a security person, but...\"] i don\u0027t know why it ever mattered?",
      "parentUuid": "4fd9fcef_6759ddbf",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67ecf77d_f26e7aae",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2022-03-15T19:40:08Z",
      "side": 1,
      "message": "IIRC, this was used because crash_dump couldn\u0027t do it\u0027s job due to seccomp policies are retained across fork+exec. What happens when these processes crash now?",
      "parentUuid": "3dbaef9d_21d73aa7",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2344c62_497c462a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-03-15T19:41:08Z",
      "side": 1,
      "message": "It uses different sockets/etc.. now. We could remove the neverallow entirely (if we don\u0027t add a meaningful one)",
      "parentUuid": "67ecf77d_f26e7aae",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9eeb228_02fa384a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2022-03-15T19:43:40Z",
      "side": 1,
      "message": "Does the socket still exist? If not perhaps we can just remove all policy for it? Based on the neverallow rule, no one is allowed to actually use the socket anymore.",
      "parentUuid": "b2344c62_497c462a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93f8eaab_dedcc599",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-03-15T23:30:43Z",
      "side": 1,
      "message": "There is a { write } rule for it, and the code references its name, but enh@ would have to comment on something more specific.",
      "parentUuid": "a9eeb228_02fa384a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87200c30_96e20842",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-03-15T23:51:48Z",
      "side": 1,
      "message": "#include \"who me\" meme...\n\n+cferris who actually knows what he\u0027s talking about :-)",
      "parentUuid": "93f8eaab_dedcc599",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ea38009_2ded068b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1019050
      },
      "writtenOn": "2022-03-16T20:17:35Z",
      "side": 1,
      "message": "I\u0027m not sure what I\u0027m being asked. Does this rule remove the ability of all processes to connect to the tombstoned_crash_socket?",
      "parentUuid": "87200c30_96e20842",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65eb5e8d_13a419fe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2022-03-16T23:15:29Z",
      "side": 1,
      "message": "This rule makes the compile time more restrictive. Though, practically speaking, we should just remove the rule because we don\u0027t care too much. It doesn\u0027t change any behavior - all it does is push a small amount of flexibility into AOSP. It\u0027s the type of change I would do and add and merge without a second though - clear improvement by itself, and it makes sure that we actually have the appropriate discussion for what to do here if it matters.\n\nThough, we can do better. The larger question is, given how tombstoned works now (and presumably there was a motivation to add this neverallow rule in the first place), should we have new neverallow rules that similarly restrict access to these sockets (the ones referenced in the macro crash_dump_fallback)?",
      "parentUuid": "1ea38009_2ded068b",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dc51684_fd0e164c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-03-17T11:59:04Z",
      "side": 1,
      "message": "Currently the policy does not permit any process any access at all to tombstoned_crash_socket:unix_stream_socket, so I presume it doesn\u0027t really exist, so I agree we should just remove this entire neverallow.\n\nA bunch of processes have write access to tombstoned_crash_socket:sock_file, but none of them have open access. Is that WAI? If it is, then Steven\u0027s question applies - is it ok for vendors to grant crash_dump_fallback to other processes?",
      "parentUuid": "65eb5e8d_13a419fe",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 8
      },
      "revId": "228a09951835de27bc9471edefc3c351d0aa77b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}