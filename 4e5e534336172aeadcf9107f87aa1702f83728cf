{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5c7cd4f5_b5bfc98a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-02-09T18:03:11Z",
      "side": 1,
      "message": "specifically, here\u0027s the build error if i remove the line marked TODO too:\n```\nFAILED: out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows\n/bin/bash -c \"(ASAN_OPTIONS\u003ddetect_leaks\u003d0 out/host/linux-x86/bin/checkpolicy -M -c \t\t30 -o out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows.tmp out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/policy.conf ) \u0026\u0026 (out/host/linux-x86/bin/sepolicy-analyze out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows.tmp neverallow -w -f out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/policy_2.conf || \t  ( echo \\\"\\\" 1\u003e\u00262; \t    echo \\\"sepolicy-analyze failed. This is most likely due to the use\\\" 1\u003e\u00262; \t    echo \\\"of an expanded attribute in a neverallow assertion. Please fix\\\" 1\u003e\u00262; \t    echo \\\"the policy.\\\" 1\u003e\u00262; \t    exit 1 ) ) \u0026\u0026 (touch out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows.tmp ) \u0026\u0026 (mv out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows.tmp out/target/product/vsoc_x86_64/obj/FAKE/sepolicy_neverallows_intermediates/sepolicy_neverallows )\"\nlibsepol.report_failure: neverallow on line 411 of system/sepolicy/public/domain.te (or line 11924 of policy.conf) violated by allow init hw_random_device:chr_file { setattr };\nlibsepol.check_assertions: 1 neverallow failures occurred\n```",
      "revId": "4e5e534336172aeadcf9107f87aa1702f83728cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1a9395a_ac98cac6",
        "filename": "public/domain.te",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-02-09T18:01:44Z",
      "side": 1,
      "message": "if i try to remove this line i get build-time errors about a conflict with a setattr rule, but the only filename/line number in the error message points here, and i can\u0027t find where the conflict is?",
      "revId": "4e5e534336172aeadcf9107f87aa1702f83728cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e2d2bb6_99f0ba8f",
        "filename": "public/domain.te",
        "patchSetId": 2
      },
      "lineNbr": 409,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-09T18:07:25Z",
      "side": 1,
      "message": "I think you\u0027re hitting this line:\nhttps://cs.android.com/android/platform/superproject/+/master:system/sepolicy/public/init.te;l\u003d324?q\u003dinit%20setattr%20dev_type%20chr_file\u0026ss\u003dandroid%2Fplatform%2Fsuperproject:system%2Fsepolicy%2F\n\nYou could add a -hw_random_device there so that init can be removed here.",
      "parentUuid": "b1a9395a_ac98cac6",
      "revId": "4e5e534336172aeadcf9107f87aa1702f83728cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79634176_656de952",
        "filename": "public/domain.te",
        "patchSetId": 2
      },
      "lineNbr": 411,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2021-02-09T18:01:44Z",
      "side": 1,
      "message": "supplementary question: i\u0027m going to change the ueventd.rc file to say root:root and set the permissions to 0000, but one obvious alternative is to just delete this line and delete the ueventd.rc line? the trade off being that the kernel default is root:root 0600 but then fewer domains have any ability to do anything. let me know which you think makes more sense...",
      "revId": "4e5e534336172aeadcf9107f87aa1702f83728cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c53d619_e8aff97f",
        "filename": "public/domain.te",
        "patchSetId": 2
      },
      "lineNbr": 411,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-09T18:07:25Z",
      "side": 1,
      "message": "Let\u0027s just leave the kernel defaults. It\u0027s pretty well locked down in selinux policy.",
      "parentUuid": "79634176_656de952",
      "revId": "4e5e534336172aeadcf9107f87aa1702f83728cf",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}