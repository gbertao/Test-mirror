{
  "comments": [
    {
      "key": {
        "uuid": "4fbf88a8_0d803589",
        "filename": "private/coredomain.te",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-04-29T00:43:48Z",
      "side": 1,
      "message": "can you modify this to just be \"open\"? The goal of this treble separation is to avoid directly opening files across the treble separation, not to receive vendor_overlay_file file descriptors. \"open\" better represents this architectural constraint.\n\nBy changing this to open, you don\u0027t need for the neverallow exclusions on lines 90-92.\n\n+sandeep, since this was introduced in https://googleplex-android-review.git.corp.google.com/c/platform/system/sepolicy/+/2070347/ . I want him to approve this change.",
      "range": {
        "startLine": 94,
        "startChar": 31,
        "endLine": 94,
        "endChar": 43
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89d204cd_0e404ef1",
        "filename": "private/coredomain.te",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-04-29T00:48:15Z",
      "side": 1,
      "message": "Let me rephrase what I said above, because it doesn\u0027t even make sense to me.  :-)\n\nDirectly calling open(\"/path/to/vendor/overlay/file\") is a treble violation. However, passing an already open file descriptor across an IPC boundary, such as via binder, is not considered a treble violation. Changing this to \"open\" just stops direct open()s, but doesn\u0027t disallow passing by file descriptor.",
      "parentUuid": "4fbf88a8_0d803589",
      "range": {
        "startLine": 94,
        "startChar": 31,
        "endLine": 94,
        "endChar": 43
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "71a43d69_c3aa1042",
        "filename": "private/coredomain.te",
        "patchSetId": 2
      },
      "lineNbr": 94,
      "author": {
        "id": 1386891
      },
      "writtenOn": "2020-04-29T03:21:45Z",
      "side": 1,
      "message": "done\n+sspatil, could you take a look?",
      "parentUuid": "89d204cd_0e404ef1",
      "range": {
        "startLine": 94,
        "startChar": 31,
        "endLine": 94,
        "endChar": 43
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3fe30ef_290047b5",
        "filename": "public/drmserver.te",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-04-29T00:43:48Z",
      "side": 1,
      "message": "for compatibility with future kernels, you also likely want the ability to mmap these files. So this should be:\n\n  allow drmserver vendor_overlay_file:file { read map };",
      "range": {
        "startLine": 53,
        "startChar": 41,
        "endLine": 53,
        "endChar": 45
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2c33118_74ce9e5b",
        "filename": "public/drmserver.te",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1386891
      },
      "writtenOn": "2020-04-29T03:21:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3fe30ef_290047b5",
      "range": {
        "startLine": 53,
        "startChar": 41,
        "endLine": 53,
        "endChar": 45
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff8e2e89_de15767e",
        "filename": "public/mediaextractor.te",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-04-29T00:43:48Z",
      "side": 1,
      "message": "change to: \"{ read map }\" for compat with newer kernels.",
      "range": {
        "startLine": 41,
        "startChar": 46,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7cc7d33_f6cf5e53",
        "filename": "public/mediaextractor.te",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1386891
      },
      "writtenOn": "2020-04-29T03:21:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ff8e2e89_de15767e",
      "range": {
        "startLine": 41,
        "startChar": 46,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6acf75a6_e013d542",
        "filename": "public/mediaserver.te",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2020-04-29T00:43:48Z",
      "side": 1,
      "message": "change to \"{ read getattr map }\" for compat with newer kernels.",
      "range": {
        "startLine": 132,
        "startChar": 43,
        "endLine": 132,
        "endChar": 59
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7f8594a7_1ad03528",
        "filename": "public/mediaserver.te",
        "patchSetId": 2
      },
      "lineNbr": 132,
      "author": {
        "id": 1386891
      },
      "writtenOn": "2020-04-29T03:21:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6acf75a6_e013d542",
      "range": {
        "startLine": 132,
        "startChar": 43,
        "endLine": 132,
        "endChar": 59
      },
      "revId": "3a1ca69d2c0bced9a26a23724c0d7d8ed11f0f74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}