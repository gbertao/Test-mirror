{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2dee5789_30580078",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-02-02T02:31:48Z",
      "side": 1,
      "message": "This change itself LGTM. However, this denial doesn\u0027t look harmless. We are checking one of the runtime_native_boot prop in dex2oat to [determine whether to use userfaultfd GC or not](http://cs/android-internal/art/runtime/gc/collector/mark_compact.cc;l\u003d146;rcl\u003d19ab849beee801f804a990bf150bd871fb5e45aa). Since this permission is missing on T, does that mean CompOS can\u0027t generate the artifacts for the right GC?",
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "109e4968_0b919386",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-02-02T02:34:47Z",
      "side": 1,
      "message": "Sorry, I didn\u0027t notice that this change is about adding an `dontaudit`. We should add an `allow` instead.",
      "parentUuid": "2dee5789_30580078",
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ed7d1cc_88e6dfa6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-02-02T09:58:43Z",
      "side": 1,
      "message": "\u003e Since this permission is missing on T, does that mean CompOS can\u0027t generate the artifacts for the right GC?\n\nThat does seem possible. But wouldn\u0027t the e2e tests have shown that?",
      "parentUuid": "109e4968_0b919386",
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "753af211_6045a15c",
        "filename": "microdroid/system/private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2023-02-01T17:20:04Z",
      "side": 1,
      "message": "Phew, I first thought we missed to actually enable userfaultfd for the whole time, but we did allow this property read for odrefresh.  By code search, I *think* it\u0027s just that in U this new read property is added to dex2oat.\n\nhttp://cs/android-internal/art/dex2oat/dex2oat.cc;l\u003d1106;rcl\u003dff2c9e2229316cdfdc75b9befc38eaac6fb9e3e5\n\nIn any case, no reason to allow the property access only to odrefresh but not dex2oat.",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 42
      },
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "705b45aa_b7fbf6c6",
        "filename": "microdroid/system/private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-02-01T17:37:33Z",
      "side": 1,
      "message": "Are you saying we should allow dex2oat to access it? Because that isn\u0027t what this CL is going.",
      "parentUuid": "753af211_6045a15c",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 42
      },
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7991cc5b_a6817392",
        "filename": "microdroid/system/private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1042276
      },
      "writtenOn": "2023-02-01T17:41:33Z",
      "side": 1,
      "message": "Sorry, yes, that\u0027s my gut feeling.\n\nJiakai, WDYT?",
      "parentUuid": "705b45aa_b7fbf6c6",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 42
      },
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "051092c9_0c784b9b",
        "filename": "microdroid/system/private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2023-02-02T02:34:47Z",
      "side": 1,
      "message": "Oops, I missed this discussion. Yes, we should allow dex2oat to access this sysprop rather than suppressing the denials.",
      "parentUuid": "7991cc5b_a6817392",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 42
      },
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4dffda54_cd583cc7",
        "filename": "microdroid/system/private/dex2oat.te",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2023-02-02T09:58:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "051092c9_0c784b9b",
      "range": {
        "startLine": 38,
        "startChar": 4,
        "endLine": 38,
        "endChar": 42
      },
      "revId": "313fbd00185cefa4d35b34926e5861e3eb7f779a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}