{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "41f3ecb5_36503ded",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-06-18T05:49:45Z",
      "side": 1,
      "message": "I don\u0027t see any vold interactions.",
      "range": {
        "startLine": 9,
        "startChar": 53,
        "endLine": 9,
        "endChar": 57
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9bc8547d_ca4e5e3b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-18T17:29:07Z",
      "side": 1,
      "message": "The vehicle_binding_util actually fork/execvp vdc. And vdc will call vold to set the binding seed value.",
      "parentUuid": "41f3ecb5_36503ded",
      "range": {
        "startLine": 9,
        "startChar": 53,
        "endLine": 9,
        "endChar": 57
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7ee5502_ada6feb4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1595133
      },
      "writtenOn": "2021-06-21T17:42:36Z",
      "side": 1,
      "message": "Hey Keith, I think it makes sense to add the details to the commit message.",
      "parentUuid": "9bc8547d_ca4e5e3b",
      "range": {
        "startLine": 9,
        "startChar": 53,
        "endLine": 9,
        "endChar": 57
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d0d41fd_1546ac5e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-21T17:55:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c7ee5502_ada6feb4",
      "range": {
        "startLine": 9,
        "startChar": 53,
        "endLine": 9,
        "endChar": 57
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e7b9bb1_61778099",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2021-06-07T23:36:56Z",
      "side": 1,
      "message": "How exactly is vehicle_binding_util invoking vdc?  Can you use O_CLOEXEC to remove this?",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2ee64ef_d68cd96a",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-07T23:48:31Z",
      "side": 1,
      "message": "We use the system provided function logwrap_fork_execvp to fork and execvp.\nThe vdc use  denied is avc: denied { use } for path\u003d\"/dev/pts/0\" dev\u003d\"devpts\"\nAnd we did not call open /dev/pts/0 in vehicle_binidng_util.",
      "parentUuid": "1e7b9bb1_61778099",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a4b4ec7_9535ff1e",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2021-06-07T23:51:35Z",
      "side": 1,
      "message": "Hmm, it looks like that\u0027s doing some CLOEXEC on its own.  Jeff, do you know how to remove this?",
      "parentUuid": "e2ee64ef_d68cd96a",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54c5405e_c89476c9",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-06-18T05:49:45Z",
      "side": 1,
      "message": "The only way that I know of is to figure out what was opened without the O_CLOEXEC flag, and add that.It\u0027s possible that this is actually intentional. Unfortunately, I don\u0027t know.",
      "parentUuid": "1a4b4ec7_9535ff1e",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3f29a00_dc91d9c3",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-18T17:29:07Z",
      "side": 1,
      "message": "Seems it is for the pipe, nothing related to file explicitly opened by the app.\navc: denied { use } for path\u003d\"/dev/pts/0\" dev\u003d\"devpts\" ino\u003d3 scontext\u003du:r:vdc:s0 tcontext\u003du:r:vehicle_binding_util:s0 tclass\u003dfd permissive\u003d0",
      "parentUuid": "54c5405e_c89476c9",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c992a077_44390fb0",
        "filename": "public/vdc.te",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-21T17:59:26Z",
      "side": 1,
      "message": "actually tried to use fork/execvp instead of  logwrap_fork_execvp .\nand close all file descriptors (0-1024) after fork. But will get \u0027avc: denied { use } for path\u003d\"/dev/null\" dev\u003d\"tmpfs\" ino\u003d10 scontext\u003du:r:vdc:s0 tcontext\u003du:r:vehicle_binding_util:s0 tclass\u003dfd permissive\u003d0\u0027",
      "parentUuid": "e3f29a00_dc91d9c3",
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "163d4583_86c6ea35",
        "filename": "public/vehicle_binding_util.te",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-06-18T05:49:45Z",
      "side": 1,
      "message": "instead of making this public, instead move the allow rule in public/vdc.te to private/vdc.te",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 25
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c35186c_73f2a33a",
        "filename": "public/vehicle_binding_util.te",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1880185
      },
      "writtenOn": "2021-06-18T17:29:07Z",
      "side": 1,
      "message": "Did you mean this:\n+# Allow stdin/out back to vehicle_binding_util\n+allow vdc vehicle_binding_util:fd use;\n+\nfrom public/vdc.te to private/vdc.te ?\nBut not this file : public/vehicle_binding_util.te",
      "parentUuid": "163d4583_86c6ea35",
      "range": {
        "startLine": 2,
        "startChar": 5,
        "endLine": 2,
        "endChar": 25
      },
      "revId": "7a1ba6cfb7e0400019ec85b5988f5068d143cabb",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}