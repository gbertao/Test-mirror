{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6048f541_855f535d",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-10-28T10:02:42Z",
      "side": 1,
      "message": "This looks too permissive. Is this to run the a CTS app? CTS by definition shouldn\u0027t require more privilege than apps. Can this apex info be obtained by other means (which is accessible to apps)?",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "961526f9_70f2610f",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-10-28T11:02:11Z",
      "side": 1,
      "message": "untrusted_app_25 is allowed to read vendor_configs_file via the rule: https://cs.android.com/android/platform/superproject/+/master:system/sepolicy/public/domain.te;drc\u003d2ffeca72a639d3a8c7adf80dd7f7abd26546ab47;l\u003d213\n\n    allow domain vendor_configs_file:file { read open getattr map };\n\nI thought reading apex_info_file(/apex/apex-info-list.xml) is not that different. Note that libvintf now reads /apex/apex-info-list.xml file as part of reading \"device manifests\".\n\nIf untrusted_app_25 can read \"vendor_configs_file\", why not \"apex_info_file\"?",
      "parentUuid": "6048f541_855f535d",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19191061_5339ca01",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2022-10-28T11:25:16Z",
      "side": 1,
      "message": "untrusted_app_25 is the sandbox for apps with targetSdkVersion\u003c\u003d25. Why those particular apps? Why not all apps? Why any apps?",
      "parentUuid": "961526f9_70f2610f",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c32ca04_708e6497",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-10-28T11:40:34Z",
      "side": 1,
      "message": "It\u0027s to fix the linked bug which uses com.android.compatibility.common.deviceinfo.VintfDeviceInfo which reading VINTF from device.",
      "parentUuid": "19191061_5339ca01",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eee25593_a0621aeb",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-10-31T00:32:30Z",
      "side": 1,
      "message": "I think vendor_configs_file are different from apex_info_file. The former are static while the latter is generated at runtime. The latter file is supposed to be an impl detail of apexd and its close friends like linkerconfig. \n\nDoes VintfDeviceInfo have to read apex_info_file? If so, for what purpose?",
      "parentUuid": "8c32ca04_708e6497",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76e7f56f_921e9f55",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-10-31T07:14:46Z",
      "side": 1,
      "message": "Linkerconfig files are also open to domain, hence, untrusted_app_25 can read them.\n\n\u003e Does VintfDeviceInfo have to read apex_info_file? If so, for what purpose?\n\nI guess the test is about to read VINTF from device. This has been safe, but since Rob\u0027s change to libvintf, reading VINTF requires reading apex_info_file as well to identify the source of vintf fragments from apexes.",
      "parentUuid": "eee25593_a0621aeb",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ba78636_22dcabbc",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2022-11-01T04:59:59Z",
      "side": 1,
      "message": "Ok. I now understand. But the questions from Jeff still remain: \"Why not all apps? Why any apps?\"",
      "parentUuid": "76e7f56f_921e9f55",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a784f0f7_f6db8945",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-11-10T07:39:45Z",
      "side": 1,
      "message": "Agreed. Allowing untrusted_app_25 to read apex-info-list.xml looks weird. \n\nInstead, I changed the source to \"domain\". I think allowing \"domain\" to read apex-info-list.xml doesn\u0027t cause any harm since the file itself only provides list of apexes. Relying on it isn\u0027t safe but reading it via APIs should be okay.",
      "parentUuid": "0ba78636_22dcabbc",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb98e47e_1d5e4d8f",
        "filename": "private/untrusted_app_25.te",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1415877
      },
      "writtenOn": "2022-11-11T02:32:58Z",
      "side": 1,
      "message": "Done\n\nrestored PatchSet #1, which fixes dumpstate denial errors.",
      "parentUuid": "a784f0f7_f6db8945",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "031315f33adc11a9f991194f5f5e079b67cd4c82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}