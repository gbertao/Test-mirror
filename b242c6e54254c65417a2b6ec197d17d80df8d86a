{
  "comments": [
    {
      "key": {
        "uuid": "2fc985b4_20309a88",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2020-07-31T18:27:19Z",
      "side": 1,
      "message": "Is it intentional that nothing has access to this?\n\nAlso, what exactly is this service?  Apps are allowed to access it?",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c73697d7_8104027f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1623038
      },
      "writtenOn": "2020-07-31T18:36:43Z",
      "side": 1,
      "message": "I actually understand very little about how sepolicy works.  I just made the changes that seemed to allow the new service in frameworks/base to run.  Any help here would be appreciated.\n\nWe\u0027re bringing up a new service for S that will monitor/estimate power consumption on Android devices.\n\nFor now the service is going to be strictly private with no public APIs.  At this time the only entity that will access this service is the BatteryStatsService.  Do I need other changes to support that access?\n\nThanks!",
      "parentUuid": "2fc985b4_20309a88",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe1d0b30_a0d5d0fb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2020-07-31T18:44:16Z",
      "side": 1,
      "message": "Note, by the way, that the presubmit failure seems legitimate (https://source.corp.google.com/android/device/google/crosshatch-sepolicy/vendor/qcom/common/vndservice.te).  (Sorry, I\u0027m in a meeting so only half concentrating.)",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "edf438f3_5ad5ef52",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1623038
      },
      "writtenOn": "2020-07-31T18:48:57Z",
      "side": 1,
      "message": "Shoot.  I know why.  Those CLs I merged to internal master rather than AOSP would prevent this naming collision.  But if I cherry-pick those changes to AOSP then the auto-merge to internal master will fail.  Hmm.  Any ideas?",
      "parentUuid": "fe1d0b30_a0d5d0fb",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "064fb754_87e15096",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2020-07-31T18:51:34Z",
      "side": 1,
      "message": "Why would the auto-merge to internal fail?  If they\u0027re cherry-picks of the same CLs, it should be fine.  If they\u0027re modified, you can use \"Merged-In: \u003cchange-id\u003e\" of the one in internal to help it merge cleanly.",
      "parentUuid": "edf438f3_5ad5ef52",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8db0509b_4b1ca2ee",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1623038
      },
      "writtenOn": "2020-07-31T19:12:36Z",
      "side": 1,
      "message": "This is what we spoke about earlier in the week.  They\u0027re not straight cherry-picks because some other CLs to device/google/blah-sepolicy went straight to internal master and not AOSP, so me merging mine to AOSP caused an auto-merge issued to internal master.\n\nSo to fix this AOSP build I need to pull in the CLs I merged to internal:\nhttps://googleplex-android-review.git.corp.google.com/q/topic:%22hal_power_stats_service_rename%22+(status:open%20OR%20status:merged)\n\nBut I need to prevent them from auto-merging to internal master since they\u0027re already merged there.  How do I do that?",
      "parentUuid": "064fb754_87e15096",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5e03b8f1_0c85b285",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1208973
      },
      "writtenOn": "2020-07-31T19:17:46Z",
      "side": 1,
      "message": "Ah, sorry.  I should stop trying to do other things while in meetings... \u003d)\n\nI just pinged the CL blocking those, so hopefully that will be resolved soon.  One option is just to merge this into internal and add it to the queue of things to merge into AOSP when things are fixed up.  That\u0027s probably the simplest.  If you have a specific need for this in AOSP, you could presumably manually modify them so they work in AOSP and use Merged-In so the automerger isn\u0027t unhappy, but that just adds more differences between the two.",
      "parentUuid": "8db0509b_4b1ca2ee",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ffa3421_62ed7ee0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1623038
      },
      "writtenOn": "2020-07-31T19:21:30Z",
      "side": 1,
      "message": "I tried to push this CL to internal yesterday and it gave me this error:\n[COMMIT 976d9926e9ac] Add permissions for new PowerStatsService\n[FAILED] aosp_hook\n    \n    The source of truth for \u0027private/compat/30.0/30.0.ignore.cil\u0027 is in AOSP.\n    The source of truth for \u0027private/service_contexts\u0027 is in AOSP.\n    The source of truth for \u0027public/service.te\u0027 is in AOSP.\n    \n    If your change contains no confidential details (such as security fixes), please\n    upload and merge this change at https://android-review.googlesource.com/.\n    \n[FAILED] repohooks for platform/system/sepolicy failed in 0.551s\n\nFATAL: Preupload failed due to above error(s).\nFor more info, please see:\nhttps://android.googlesource.com/platform/tools/repohooks/\n\nWhich is how I wound up on this AOSP path.\n\nAny idea?",
      "parentUuid": "8db0509b_4b1ca2ee",
      "revId": "b242c6e54254c65417a2b6ec197d17d80df8d86a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}