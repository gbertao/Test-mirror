{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f7a96533_5eb911c6",
        "filename": "private/artd.te",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "Doesn\u0027t this imply art_exec should have a similar neverallow rule?",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c15d4504_ed8d9634",
        "filename": "private/artd.te",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "We don\u0027t do a domain transition when calling art_exec, so art_exec inherits all artd rules, including the neverallow rule.",
      "parentUuid": "f7a96533_5eb911c6",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "28be8013_26529ce6",
        "filename": "private/artd.te",
        "patchSetId": 4
      },
      "lineNbr": 69,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T15:24:36Z",
      "side": 1,
      "message": "Aha, ok. Then it has the (unintended but benign) effect that art_exec can exec itself within the same domain as well.\n\n+1 to Alan\u0027s comment about joining artd and art_exec. That makes it more clear that everything here applies to art_exec.",
      "parentUuid": "c15d4504_ed8d9634",
      "range": {
        "startLine": 69,
        "startChar": 2,
        "endLine": 69,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "577bf2d5_bd97a581",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "Why is this necessary now?",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf71774e_bf1284f3",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "Before we use a profile for compilation, we now run profman with the profile and the apk to check if the profile is usable, and fall back to other profiles if not. This is a new behavior.",
      "parentUuid": "577bf2d5_bd97a581",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8668ef59_6fc36bb2",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T15:24:36Z",
      "side": 1,
      "message": "So that\u0027s an unrelated change then. A separate CL would be ideal, but short of that at least mention it in the description.",
      "parentUuid": "bf71774e_bf1284f3",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f857c5d_bb656f71",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T17:15:08Z",
      "side": 1,
      "message": "I don\u0027t think this is an unrelated change. This new behavior is part of the app compilation CUJ that this CL is updating the SELinux policy for.",
      "parentUuid": "8668ef59_6fc36bb2",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bcde686_e2f8ec08",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T20:55:39Z",
      "side": 1,
      "message": "This profman change doesn\u0027t depend on the other changes or vice versa, and it would be perfectly sensible to break it out into a separate CL (cf. small CLs: go/small-cls#what_is_small). Just making the CL description broad enough to encompass all the changes don\u0027t make them related in this sense.\n\nIt\u0027s useful if the CL description describes everything that goes into the change and why, in particular in these files where the history is extra important to understand why things are the way they are. So please extend the description to mention this.",
      "parentUuid": "6f857c5d_bb656f71",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "891d3682_a9896d6e",
        "filename": "private/coredomain.te",
        "patchSetId": 4
      },
      "lineNbr": 80,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-22T11:17:14Z",
      "side": 1,
      "message": "Thanks for the suggestion. It can be controversial whether \"app compilation CUJ\" is a \"broad\" scope or not. However, I don\u0027t regard this as a critical issue. Debating on this might be an overkill.\n\nRegarding the CL description, initially, I thought about putting something there, but I then found that whatever I wrote couldn\u0027t add any useful information because the reason for every rule I added in this CL has a comment that already explains things. For this particular line, why it is needed is documented at the corresponding allow rule, and readers can find them by either searching for \"profman[^;]*vendor_app_file pcre:yes f:\\.te -f:prebuilts\" or coming to this CL from blame.",
      "parentUuid": "4bcde686_e2f8ec08",
      "range": {
        "startLine": 80,
        "startChar": 8,
        "endLine": 80,
        "endChar": 16
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16aad36a_320c4705",
        "filename": "private/dex2oat.te",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "It\u0027s actually art_exec that will exec dex2oat, but I take it that since artd can exec art_exec without a domain transition, it works to just list artd here?",
      "range": {
        "startLine": 60,
        "startChar": 16,
        "endLine": 60,
        "endChar": 20
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e1fa064d_914429d7",
        "filename": "private/dex2oat.te",
        "patchSetId": 4
      },
      "lineNbr": 60,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "See the comment above. art_exec inherits all artd rules.",
      "parentUuid": "16aad36a_320c4705",
      "range": {
        "startLine": 60,
        "startChar": 16,
        "endLine": 60,
        "endChar": 20
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd93752e_94a1c997",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "Would it be ok to put this on one line, even though it may get slightly long? The reason is to make it easier to see relevant matches when grep\u0027ing etc.",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a422de3_fe68ea37",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "Here too - why is this necessary now? Are you changing profman?\n\nThere\u0027s overlap with `apk_data_file` permissions in public/profman.te. Should that be cleaned up?",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "778c2236_e33c791d",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "See the comment above. We are introducing a new behavior.\n\nI know there\u0027s an overlap, but I dare not change the public .te file because I\u0027m not sure what I will break.",
      "parentUuid": "3a422de3_fe68ea37",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4851f1f_14cc63ad",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "I don\u0027t know if there is a style guide for .te files. It seems to me that many files wrap lines at 80 characters, so I did that too.",
      "parentUuid": "dd93752e_94a1c997",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efeb4325_e2e609ee",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T15:24:36Z",
      "side": 1,
      "message": "Imo it\u0027s hard enough to search for applicable rules in these files, and this doesn\u0027t make it easier. That\u0027s more important than a generic line length rule. I also see plenty of examples where lines grow longer than 80 characters.\n\nAlan, you have more authority here, WDYT?",
      "parentUuid": "a4851f1f_14cc63ad",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8af87ee5_98497dbe",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-07-21T15:45:49Z",
      "side": 1,
      "message": "TBH the style as Jiakai has it is pretty much the preferred format.\nIt at least has the benefit of minimal deltas for adding new file types.\nCodesearch handles this reasonably well tbh.\n(sesearch om the binary policy is what I use when all else fails.)",
      "parentUuid": "efeb4325_e2e609ee",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b92bfa4d_6118295d",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T20:55:39Z",
      "side": 1,
      "message": "I often want to search for, say, \"profman\" AND \"vendor_app_file\", because either by themselves produce lots of uninteresting hits. That gets harder this way.",
      "parentUuid": "8af87ee5_98497dbe",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5554b6db_6d36812e",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-22T11:17:14Z",
      "side": 1,
      "message": "Code Search can do multiple-line matches if you set \"pcre:yes\".\n\nE.g., https://source.corp.google.com/search?q\u003dprofman%5B%5E;%5D*privapp_data_file%20pcre:yes%20f:%5C.te%20-f:prebuilts\u0026sq\u003dpackage:%5Eandroid-internal$",
      "parentUuid": "b92bfa4d_6118295d",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ceb35ee3_27175a15",
        "filename": "private/profman.te",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2022-07-22T11:36:55Z",
      "side": 1,
      "message": "I do understand your pain - I guess I\u0027ve got better at picking out the relevant bis with practice.\n\nBut sesearch is ideal for that sort of thing - especially since some of the relevant rules may involve attributes. Once you know exactly what is allowed, backtracking it to the source rules is easier. See http://b/178191966#comment6.",
      "parentUuid": "5554b6db_6d36812e",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 9,
        "endChar": 33
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76864939_7c9142b3",
        "filename": "public/domain.te",
        "patchSetId": 4
      },
      "lineNbr": 1233,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2022-07-21T14:14:51Z",
      "side": 1,
      "message": "Nit: \"and artd\" (I suspect there may be more comments explaining stuff in relation to installd that should be updated to mention artd as well.)",
      "range": {
        "startLine": 1233,
        "startChar": 18,
        "endLine": 1233,
        "endChar": 19
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "14a052ba_3c96672e",
        "filename": "public/domain.te",
        "patchSetId": 4
      },
      "lineNbr": 1233,
      "author": {
        "id": 1884045
      },
      "writtenOn": "2022-07-21T14:53:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "76864939_7c9142b3",
      "range": {
        "startLine": 1233,
        "startChar": 18,
        "endLine": 1233,
        "endChar": 19
      },
      "revId": "529db20c7a55e1d23b2f70d3891b5214d315425b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}