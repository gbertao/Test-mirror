{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "05021b4d_802a33b4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-10-12T15:12:28Z",
      "side": 1,
      "message": "I don\u0027t think the failure is related to this CL - coral devices seem to be having problems - but you never know.",
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "39234b89_3bfe1c79",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-10-14T08:42:00Z",
      "side": 1,
      "message": "It\u0027s not clear to me why this is safe. FWIW, I have no idea what shared_relro is or why it would or would not be safe to share across apps.",
      "range": {
        "startLine": 388,
        "startChar": 72,
        "endLine": 388,
        "endChar": 88
      },
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94847b99_8fe041dc",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-10-14T08:56:21Z",
      "side": 1,
      "message": "These are the files in /data/misc/shared_relro.\nBefore my change they are world readable (-r--r--r--, labeled u:object_r:shared_relro_file:s0), and we have these rules:\n\n# Allow any app to read shared RELRO files.\nallow appdomain shared_relro_file:dir search;\nallow appdomain shared_relro_file:file r_file_perms;\n\nSo the change here just ensures that remains true even if the files are now labeled u:object_r:shared_relro_file:s0:c13,c260,c512,c768.\n\nAIUI these are created at boot by the shared_relro process and then read by anything using webview.\n\nFor background see https://docs.google.com/presentation/d/1NzphMfRCLML1vF04-6WXPkb_lFquzZ4lfta7h23uJjk/edit#slide\u003did.g5829f0524_023. \n\nCode to generate them is here: frameworks/base/native/webview/loader/loader.cpp.\nAnd is called from frameworks/base/core/java/android/webkit/WebViewLibraryLoader.java.",
      "parentUuid": "39234b89_3bfe1c79",
      "range": {
        "startLine": 388,
        "startChar": 72,
        "endLine": 388,
        "endChar": 88
      },
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7dc4ac0_a8391427",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-10-14T12:02:30Z",
      "side": 1,
      "message": "Nice. Thank you for the explanation.",
      "parentUuid": "94847b99_8fe041dc",
      "range": {
        "startLine": 388,
        "startChar": 72,
        "endLine": 388,
        "endChar": 88
      },
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6cb11308_dbd81eaa",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2020-10-14T15:41:11Z",
      "side": 1,
      "message": "Yeah, I\u0027m not familiar with the details of SELinux here (dunno what mlstrustedobject means), but Alan\u0027s description of what these files are for is correct - they are explicitly intended to be readable (and mmapable) by all applications on the device, and are created at boot time and after a WebView update is installed. This is a memory optimisation for the relocations applied to the WebView binary, which is not loaded into the zygote for security reasons so can\u0027t share those pages by inheriting them through fork.",
      "parentUuid": "d7dc4ac0_a8391427",
      "range": {
        "startLine": 388,
        "startChar": 72,
        "endLine": 388,
        "endChar": 88
      },
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e33dbaa1_b8893a32",
        "filename": "public/file.te",
        "patchSetId": 1
      },
      "lineNbr": 388,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2020-10-14T15:46:52Z",
      "side": 1,
      "message": "Thanks.\nFWIW mlstrustedobject exempts the files from our normal rules that things owned by one user or uid are not accessible to processes in other uids or users. That wasn\u0027t previously necessary, but became so because of the tweak I made to the shared_relro SELinux configuration elsewhere in this CL.",
      "parentUuid": "6cb11308_dbd81eaa",
      "range": {
        "startLine": 388,
        "startChar": 72,
        "endLine": 388,
        "endChar": 88
      },
      "revId": "c7229c760f7fc179820d2e330e1aa4be764f322f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}