{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7b5723b1_c78f6d02",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-11-30T08:58:55Z",
      "side": 1,
      "message": "Any remaining concerns?",
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c3df051_d5a7aabe",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-11-30T03:39:38Z",
      "side": 1,
      "message": "Which FD does it use?",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e889adf0_d2d16965",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-11-30T08:11:35Z",
      "side": 1,
      "message": "I\u0027m not sure, but without this zipfuse and apkdmverity fail. I tested dontaudit and it also fails.",
      "parentUuid": "4c3df051_d5a7aabe",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad679fa2_7cb4c73e",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-11-30T08:13:19Z",
      "side": 1,
      "message": "Maybe I could try closing fd 0,1,2, instead of redirecting them to /dev/null, but I\u0027m afraid that it could be overkill :$",
      "parentUuid": "e889adf0_d2d16965",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae364f06_3b5d13ae",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1291338
      },
      "writtenOn": "2021-11-30T08:44:38Z",
      "side": 1,
      "message": "Closing 0,1,2 didn\u0027t work.",
      "parentUuid": "ad679fa2_7cb4c73e",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb7819c5_24fca23f",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2021-12-01T04:24:17Z",
      "side": 1,
      "message": "We need to understand why this is needed.",
      "parentUuid": "ae364f06_3b5d13ae",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a071745_add40a66",
        "filename": "microdroid/system/private/zipfuse.te",
        "patchSetId": 3
      },
      "lineNbr": 41,
      "author": {
        "id": 1060831
      },
      "writtenOn": "2021-12-01T09:53:16Z",
      "side": 1,
      "message": "Looking in /proc/pid/fd of the processes might help.\nIt\u0027s odd. microdroid_manager should be specifying CLOEXEC everywhere.\n\nIf you don\u0027t have this allow rule, then the fd received on the other side will be valid but will point at /dev/null. If that doesn\u0027t cause problems then it\u0027s probably an accidentally open fd. We should really fix that, but if we don\u0027t need the fd it would be better to dontaudit rather than adding a bogus allow.\n\nYou\u0027d definitely need to close 0-2 anyway.",
      "parentUuid": "bb7819c5_24fca23f",
      "range": {
        "startLine": 41,
        "startChar": 0,
        "endLine": 41,
        "endChar": 40
      },
      "revId": "39c7aab089806a013ea2558f8ed297254271cfde",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}