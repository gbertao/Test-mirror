{
  "comments": [
    {
      "key": {
        "uuid": "9a5073f1_a022c46a",
        "filename": "private/storaged.te",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2016-12-16T18:55:05Z",
      "side": 1,
      "message": "Actually, since all you need to do is scan through proc, this would be better as:\n\n  allow storaged proc:dir r_dir_perms;",
      "revId": "775276c8ad395491b4736f89ba73b84fe84d0ff1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a5073f1_abbaa5a1",
        "filename": "private/storaged.te",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1051712
      },
      "writtenOn": "2016-12-16T19:13:35Z",
      "side": 1,
      "message": "Thanks. Tested this works. What\u0027s the difference between the two. How does r_dir_perms allow storaged to read individual file, e.g. /proc/123/io?",
      "parentUuid": "9a5073f1_a022c46a",
      "revId": "775276c8ad395491b4736f89ba73b84fe84d0ff1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a5073f1_a691fca3",
        "filename": "private/storaged.te",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1051712
      },
      "writtenOn": "2016-12-16T21:20:23Z",
      "side": 1,
      "message": "If I understand it right, r_dir_perms allows a few permission on the dir while r_dir_file allows permissions on dir and file. So how does r_dir_perms allow access on file under the dir? Maybe /proc/123/io is allowed and /proc/cmdinfo is disallowed by r_dir_perms while r_dir_file allows both?",
      "parentUuid": "9a5073f1_abbaa5a1",
      "revId": "775276c8ad395491b4736f89ba73b84fe84d0ff1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7a2c67b_e9ef113e",
        "filename": "private/storaged.te",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1051712
      },
      "writtenOn": "2016-12-20T01:46:05Z",
      "side": 1,
      "message": "I \"think\" we need r_dir_file to read files under /proc/PID/io. But I don\u0027t know why it still works with r_dir_perms and even without this line. I have to run as root but this shouldn\u0027t affect sepolicy, right? I guess the permission is given indirectly, e.g. dumpstate has r_file_perms on proc so system allows it when dumpstate invokes storaged.\n\nDo you have any recommendation how to proceed so that this patch can be merged? Thanks!",
      "parentUuid": "9a5073f1_a691fca3",
      "revId": "775276c8ad395491b4736f89ba73b84fe84d0ff1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}