{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "574fdcc7_83221f68",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-10T07:58:57Z",
      "side": 1,
      "message": "Shouldn\u0027t we just be using the existing stats_service_server (from above)?\n\nWould we ever grant access to stats_service_server but not to hal_stats_server?",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a370a9c_3fe26e79",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-10T17:16:57Z",
      "side": 1,
      "message": "These are two different services - stats_service_server based on HIDL implementation and the hal_stats_server based on the AIDL implementation. They need to have two different set of policies - due to difference in their behavior (HIDL does not need ServiceManager allow rules, and AIDL does not need HWServiceManger allow rules)",
      "parentUuid": "574fdcc7_83221f68",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff5ea64b_e998412c",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-10T17:53:25Z",
      "side": 1,
      "message": "I think I disagree. I care about what should have access, not about whether the service is served over AIDL or HIDL.\n\nI\u0027m mostly looking for Steven\u0027s thoughts here. Whatever we decide, it should be consistent.",
      "parentUuid": "7a370a9c_3fe26e79",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2df89bc7_204256ae",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2021-02-10T18:33:17Z",
      "side": 1,
      "message": "I missed this, talking offline, but:\n\nso there are two options here:\n1. factor \u0027hal_\u0027 out of all of those macros, so that we also have \u0027stats_service_client\u0027 and can re-use this attribute\n2. re-use the server attribute and forget about hal_client_domain\n\nIf Vova decides to do (2), I\u0027ll file a bug to do (1).",
      "parentUuid": "ff5ea64b_e998412c",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8c99597_86e8dff4",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-10T18:57:51Z",
      "side": 1,
      "message": "As outcome of an offline discussion with Steven decided to try below approach to unblock my original task:\n- still create the fwk_stats_service\n- add an add_service line like this:\nhttp://cs/android/system/sepolicy/public/stats_service_server.te?l\u003d1\u0026rcl\u003de1040dfac98c086f7bcdb15954f485e1ce4dc2ca\n- allow clients to talk to stats_service_server (not to talk to system_server specifically)",
      "parentUuid": "2df89bc7_204256ae",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b06d6510_60b3046b",
        "filename": "private/system_server.te",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-11T00:32:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8c99597_86e8dff4",
      "range": {
        "startLine": 12,
        "startChar": 28,
        "endLine": 12,
        "endChar": 44
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc88e843_0c8f7018",
        "filename": "public/attributes",
        "patchSetId": 9
      },
      "lineNbr": 350,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2021-02-10T07:58:57Z",
      "side": 1,
      "message": "for consistency reasons, should this be treated like the attributes below (line 374) or should we instead move those to use the hal_attribute() macro?",
      "range": {
        "startLine": 350,
        "startChar": 0,
        "endLine": 350,
        "endChar": 21
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c92cce1_7f42f439",
        "filename": "public/attributes",
        "patchSetId": 9
      },
      "lineNbr": 350,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-10T17:16:57Z",
      "side": 1,
      "message": "hal_attribute(stats) defines client domain - hal_stats_client, to which we attach appropriate set of permissions (https://r.android.com/c/platform/system/sepolicy/+/1570880/9/public/hal_stats.te#1). and then all clients are added to this domain. It could be done for the HIDL implementation as well. On the other hand the HIDL service is going to be marked as deprecated - which suggests lower priority in comparison to AIDL for the refactoring its sepolicies. The aspects of historical reasons for current HIDL sepolicies definition would be addressed at b/179814542",
      "parentUuid": "cc88e843_0c8f7018",
      "range": {
        "startLine": 350,
        "startChar": 0,
        "endLine": 350,
        "endChar": 21
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "442bf859_ec172840",
        "filename": "public/attributes",
        "patchSetId": 9
      },
      "lineNbr": 350,
      "author": {
        "id": 1827146
      },
      "writtenOn": "2021-02-11T00:33:22Z",
      "side": 1,
      "message": "changes declined in a favor of different approach",
      "parentUuid": "6c92cce1_7f42f439",
      "range": {
        "startLine": 350,
        "startChar": 0,
        "endLine": 350,
        "endChar": 21
      },
      "revId": "0e38bbfaa08b03bf9f21e1904c09c478a0ce34c5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}