{
  "comments": [
    {
      "key": {
        "uuid": "4feebe44_4777d44b",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-08-23T16:23:51Z",
      "side": 1,
      "message": "Delete lines 88, 90, 91, 93, 94, 95, 97, 99, and 100. Instead, add the following line to public/app.te:\n\n  unix_socket_connect(appdomain, statsdw, statsd)\n\nThis grants permission to all app domains, instead of having to list them out individually.",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85e06659_8b9c28dd",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-08-23T16:26:04Z",
      "side": 1,
      "message": "Sorry, not \"unix_socket_connect\". I meant \"unix_socket_send\"",
      "parentUuid": "4feebe44_4777d44b",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13f32b56_e0f0007a",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1258293
      },
      "writtenOn": "2018-08-23T18:14:16Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "85e06659_8b9c28dd",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "282344b0_39fe9a00",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1258293
      },
      "writtenOn": "2018-08-23T20:14:24Z",
      "side": 1,
      "message": "We actually needed \"bluetooth\" to avoid selinux violation. I have uploaded another patch to include it back.",
      "parentUuid": "13f32b56_e0f0007a",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "678fab34_436b015c",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-08-23T20:16:35Z",
      "side": 1,
      "message": "Can you send me the SELinux violation?\n\nbluetooth has the \"appdomain\" attribute. See line 5 at https://android.googlesource.com/platform/system/sepolicy/+/00f28f6d09719911d2abbf9e85eefde6dccaa363/private/bluetooth.te#5\n\nSo explicitly adding bluetooth shouldn\u0027t be necessary, as it should be implicitly covered by the appdomain rule in app.te",
      "parentUuid": "282344b0_39fe9a00",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "57fd698e_88c051d5",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1258293
      },
      "writtenOn": "2018-08-23T20:18:45Z",
      "side": 1,
      "message": "08-23 19:18:17.406  4581  4581 I auditd  : type\u003d1400 audit(0.0:10): avc: denied { sendto } for comm\u003d\"Binder:4581_7\" path\u003d\"/dev/socket/statsdw\" scontext\u003du:r:bluetooth:s0 tcontext\u003du:r:statsd:s0 tclass\u003dunix_dgram_socket permissive\u003d0",
      "parentUuid": "678fab34_436b015c",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ae86094d_2c65e9c1",
        "filename": "private/statsd.te",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 1003966
      },
      "writtenOn": "2018-08-23T20:27:08Z",
      "side": 1,
      "message": "When I cherrypick your patch and run the following command, the rule is there for me:\n\nnnk@nick:/work/android/master$ sesearch --allow -s bluetooth -p sendto -t statsd -c unix_dgram_socket out/./target/product/hikey960/obj/ETC/sepolicy_intermediates/sepolicy\n\nallow bluetooth statsd:unix_dgram_socket sendto;\n\nCan you try:\n\n  1) adb root\n  2) adb pull /sys/fs/selinux/policy\n  3) sesearch --allow -s bluetooth -p sendto -t statsd -c unix_dgram_socket ./policy\n\nor check the build artifact in your tree.",
      "parentUuid": "57fd698e_88c051d5",
      "revId": "3543ff060adab7a61175d97684929b501f6441dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}