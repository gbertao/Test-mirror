{
  "comments": [
    {
      "key": {
        "uuid": "b8cd9f6f_73511c00",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-03-30T17:53:20Z",
      "side": 1,
      "message": "This should be the \"binder_use(blank_screen)\".",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 41
      },
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0026a7ab_604de192",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1045544
      },
      "writtenOn": "2020-03-30T18:50:26Z",
      "side": 1,
      "message": "Done (still to be tested, but I can\u0027t see how it would break anything)",
      "parentUuid": "b8cd9f6f_73511c00",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 41
      },
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d6eef97b_e90d551d",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-03-30T19:20:53Z",
      "side": 1,
      "message": "Unrelated to this change, but line 8 is unnecessary, or rather, already included in line 6.\n\nhttps://cs.android.com/android/platform/superproject/+/master:system/sepolicy/public/hal_light.te?q\u003dhal_light",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5fd695e_33b38ce4",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1045544
      },
      "writtenOn": "2020-03-30T22:44:38Z",
      "side": 1,
      "message": "Amended the commit. I didn\u0027t see any reason not to also fix this right now.",
      "parentUuid": "d6eef97b_e90d551d",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c028fbd0_ca6af72f",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-03-31T11:02:25Z",
      "side": 1,
      "message": "Nice, thanks!",
      "parentUuid": "f5fd695e_33b38ce4",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79dc3d5c_f18e8acb",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2020-04-01T18:52:16Z",
      "side": 1,
      "message": "No, this is false. L6 refers to the HIDL service, and L8 refers to the AIDL service. Please test all changes.",
      "parentUuid": "c028fbd0_ca6af72f",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92697ef0_439b7919",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1054468
      },
      "writtenOn": "2020-04-01T19:00:22Z",
      "side": 1,
      "message": "Oh, good catch. I forgot these can now be AIDL services.",
      "parentUuid": "79dc3d5c_f18e8acb",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c90d26c3_e82cd3c0",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1045544
      },
      "writtenOn": "2020-04-01T22:29:11Z",
      "side": 1,
      "message": "What I did to test it was boot up cf_x86_phone P13257004 from the presubmit page [1] and check that it\u0027s in enforcing mode, then run `adb logcat -b all` in one terminal to look for what happens when I kick blank_screen into action with `setprop ctl.start blank_screen` as suggested.\n\n[1] https://android-build.googleplex.com/builds/treetop/android-review/1271863?revision\u003d5\u0026revisionAttempt\u003d1\n\nThis was the output (no avc errors before or after):\n\n     0 I init    : starting service \u0027blank_screen\u0027...\n   411 I android.hardware.lights-service.example: Lights reporting supported lights\n     0 I init    : Control message: Processed ctl.start for \u0027blank_screen\u0027 from pid: 9257 (setprop ctl.start blank_screen)\n     0 I init    : Service \u0027blank_screen\u0027 (pid 9258) exited with status 0 oneshot service took 0.016000 seconds in background\n     0 I init    : Sending signal 9 to service \u0027blank_screen\u0027 (pid 9258) process group...\n     0 I libprocessgroup: Successfully killed process cgroup uid 1000 pid 9258 in 0ms\n\nReading Jeff\u0027s comment and then going and looking at the relevant files it had looked like, since the hal_client_domain on L6 is giving blank_screen hal_light_client, L10 of hal_light.te is doing the same thing as L8 was here.\n\nThe line is \"allow hal_light_client hal_light_service:service_manager find;\" which I had thought was referring to the AIDL HAL, not the HIDL (because it\u0027s hal_light_service, not hal_light_hwservice)\n\nIs this incorrect? Or was that not really a good enough test and it would be better off with something automated?",
      "parentUuid": "79dc3d5c_f18e8acb",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db5d5404_50425a64",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2020-04-01T22:52:37Z",
      "side": 1,
      "message": "hmmm, okay, you are correct. Sorry for doubting. Yes, it is from hal_light_client, and that is the right way to test.\n\nIn this case though, I think we should probably have binder_use in hal_light directly and delete everything here. WDYT? \u0027binder_call\u0027 there could be removed as well.",
      "parentUuid": "c90d26c3_e82cd3c0",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a4e3016f_0ce661b0",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1045544
      },
      "writtenOn": "2020-04-02T16:43:22Z",
      "side": 1,
      "message": "Yes, that makes sense. I moved this line there in PS6 and also added a couple of comments to try and call out when we\u0027re talking about the HIDL process and when we\u0027re talking about the AIDL process.\n\nNote that PS6 is untested for now, it will be tested when presubmit is done.",
      "parentUuid": "db5d5404_50425a64",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "49c3c9d8_0b3d5096",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2020-04-02T18:02:00Z",
      "side": 1,
      "message": "Thank you, and sorry for the confusion.",
      "parentUuid": "a4e3016f_0ce661b0",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55f87fbc_42cf0de9",
        "filename": "private/blank_screen.te",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1045544
      },
      "writtenOn": "2020-04-02T19:10:20Z",
      "side": 1,
      "message": "The confusion helped refactor the files to be more readable and less confusing in future. You can apologise but we can also be thankful for it :-)",
      "parentUuid": "49c3c9d8_0b3d5096",
      "revId": "41658c2a002a8fc0a1cf411421e423f376779797",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}